<!DOCTYPE html>
<html>
  
<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/dashboard by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <base  />
    <link rel="stylesheet" type="text/css" href="../../css.css" />
    <title>AlertMe.com API v5 Documentation :: calls/widgets/dashboard :: DRAFT</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  </head>
  <body>
    <h1>
      API v5 Documentation <span>draft</span>
    </h1>
    <div class="menu">
      <ul class="menu">
   <li><h4><a href="../../../docs.html">overview</a></h4>
      <ul>
         <li><a href="../../responses.html">responses</a></li>
         <li><a href="../../errors.html">errors</a></li>
         <li><a href="../../examples.html">examples</a></li>

      </ul>
   </li>
   <li><h4>calls</h4>
      <ul>

         <li><a href="../sessions.html">sessions</a></li>

         <li><a href="../users.html">users</a>
            <ul>

               <li><a href="../users/systemalerts.html">system alerts</a></li>

               <li><a href="../questions.html">questions</a></li>

               <li><a href="../hubs.html">hubs</a>
                  <ul>
                     <li><a href="../hubs/activityLog.html">activity log (history)</a></li>
                     <li><a href="../devices.html">devices</a>
                       <ul>

                           <li><a href="../devices/events.html">events</a></li>

                        </ul>
                     </li>
                     <li><a href="../hubs/profiles.html">profiles</a></li>

                     <li>rules
                        <ul>
                           <li><a href="../rules/actions.html">actions</a></li>
                           <li><a href="../../actions.html">action types</a></li>                           
                           <li><a href="../rules/wizard.html">wizard</a></li>
                        </ul>
                     </li>
                     <li><a href="../services.html">services</a>
                        <ul>

                           <li><a href="../services/events.html">events</a></li>

                        </ul>
                     </li>

                  </ul>
               </li>

               <li><a href="../widgets.html">widgets</a>
                  <ul>
                     <li><a href="alarm.html">alarm</a></li>
                     <li><a href="care.html">care</a></li>
                     <li><a href="cameras.html">cameras</a></li>
                     <li><a href="climate.html">climate</a></li>
                     <li><a href="dashboard.html">dashboard</a></li>
                     <li><a href="heating.html">heating</a></li>
                     <li><a href="locks.html">locks</a></li>
                     <li><a href="homestatus.html">homestatus</a></li>

                     <li><a href="presence.html">presence</a></li>
                     <li><a href="smartplugs.html">smartplugs</a></li>
                     <li><a href="swingometer.html">swingometer</a></li>
                     <li><a href="temperature.html">temperature</a></li>
                     <li><a href="usage.html">usage</a></li>
                     <li><a href="petdoors.html">petdoors</a></li>
                     <li><a href="group.html">groups</a></li>
                     <li><a href="history.html">history</a></li>
                     <li><a href="irrigation.html">irrigation</a></li>
                     <li><a href="secondaryuser.html">secondaryuser</a></li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
   </li>
</ul>
    </div>
    <div class="doc calls widgets dashboard_page">
      <div class="section">
    <p>All calls listed below follow <span class="call">/users/<em>:username</em>/widgets</span> in the URI;
       this prefix has been omitted for conciseness</p>
</div>

<div class="section">
   <h2>GET <span class="call">/dashboard</span></h2>
   
   <p>Returns information on states of widgets on the dashboard</p>
   
   <div class="args">
      <h3>Arguments: </h3>
      <dl>
         <dt>logSize</dt>  <dd>[obsolete] You don't need to send logSize anymore. This call returns 3 log entries always</dd>
      </dl>
   </div>

   <p class="note">Implemented widgets:</p>
   <ol>
      <li>Home Modes Widget</li>
      <li>Alarm Widget</li>
      <li>Home Status Widget</li>
      <li>Control Widget</li>
      <li>Camera Widget</li>
      <li>Thermostat Widget</li>
      <li>Temperature Widget</li>
      <li>Presence Widget</li>
      <li>Usage Widget</li>
      <li>Cost Widget</li>
      <li>Advertisement</li>
      <li>Activity Log</li>
      <li>Care Widget</li>
      <li>Pet Doors Widget</li>
      <li>Locks Widget</li>
      <li><a href="dashboard.html#irrigation">Irrigation Widget</a></li>
   </ol>

   <div class="sample">
      <h3>Widgets statuses:</h3>
      <p>All widgets have <em>status</em> field which reports of the current availability of a widget and data for it.</p>
      <dl>
         <dt>OK</dt> <dd>Everything is OK, a widget is available and should be displayed on the dashboard</dd>
         <dt>NOT_AVAILABLE</dt>  <dd>Widget is disabled in a tariff and should not be displayed</dd>
         <dt>NO_DEVICE</dt>   <dd>There is no device to take information from</dd>
         <dt>DEVICE_MISSING</dt>   <dd>There is at least one installed device, but it is not available at the moment</dd>
         <dt>NO_DATA</dt>  <dd>No data is available for widget</dd>
      </dl>
   </div>

   <div class="sample">
      <h3>Sample requests:</h3>

      <p class="call">/users/Testuser0/widgets/dashboard</p>
      <p class="call">Returns information on states of widgets on the dashboard. The activity log contains 3 entries</p>
   </div>
   
   <div class="sample">
      <h3>Sample response:</h3>
      <p class="json">
{
   "HOME_MODE" : {
      "status" : "OK",
      "currentMode" : "HOME",
      "enabled": true
   },
   "ALARM" : {
      "status" : "OK",
      "behavior" : "HOME",
      "state" : "DISARMED",
      "details" : []
   },
   "HOME_STATUS" : {
      "status" : "OK",
      "alarm" : {
         "behavior" : "AWAY",
         "state" : "ARMED",
         "details" : []
      },
      "messages" : [
         {
            "id" : 3,
            "message" : "2 devices have low battery",
            "severity" : 2
         }
      ]
   },
   "CONTROL" : {
      "status" : "OK",
      "on" : 3,
      "off" : 2
   },
   "CAMERA" : {
      "status" : "NO_DEVICE",
      "activeCameras" : 0
   },
    "LOCKS": {
        "status": "OK",
        "name": "Back door",
        "locked": 0,
        "unlocked": 2,
        "total": 2
    },
   "THERMOSTAT" : {
      "status" : "NO_DEVICE",
      "temperatureUnit" : null,
      "currentTemperature" : null,
      "targetTemperature" : null
   },
   "TEMPERATURE" : {
      "status" : "OK",
      "outside" : 12,
      "inside" : 12,
      "weatherIcon" : "night_light_rain_showers",
      "temperatureUnit" : "C"
   },
   "PRESENCE" : {
      "status" : "OK",
      "keyfobsAtHome" : 1
   },
   "USAGE" : {
      "status" : "NO_DEVICE",
      "rightNow" : {
         "units" : null,
         "value" : null
      }
   },
   "COST" : {
      "status" : "NO_DEVICE",
      "currency" : null,
      "todaySoFar" : null
   },
   "ADS" : {
      "status" : "OK"
   },
   "IRRIGATION" : {
      "status" : "OK",
      "visible" : true,
      "irrigation": {
         "id": "AD-02-02-02-02-02-02-12",
         "type": "OrbitSplinkler",
         "name: "Splinkler 1",
         "presence": true,
         "onOffState": "ON",
         "state": "IDLE",
         "next": {
            "zone": {
               "id": "00-00-00-00-00-00-00",
               "number": 1,
               "name": "Demo Zone",
               "active": true,
               "color": 1,
               "image": "blue",
            },
            "start": 1387411211,
            "time": '11:00 am',
         }
      } ,
   },
   "LOG" : {
      "status" : "OK",
      "data" : {
         "2012-04" : {
            "activities" : [
               {
                  "id" : "139",
                  "timestamp" : 1334134974,
                  "type" : "IADisarmed",
                  "details" : {
                     "1" : {
                        "source" : "the website"
                     }
                  }
               },
               {
                  "id" : "138",
                  "timestamp" : 1334131267,
                  "type" : "IAArmed",
                  "details" : {
                     "1" : {
                        "source" : "the website",
                        "stateName" : "away"
                     }
                  }
               }
            ]
         },
         "2012-03" : {
            "activities" : [
               {
                  "id" : "137",
                  "timestamp" : 1331561691,
                  "type" : "IADisarmed",
                  "details" : {
                     "1" : {
                        "source" : "the website"
                     }
                  }
               }
            ]
         }
      }
   }
}
      </p>
      
      <div class="errors">
         <h3>Returned errors</h3>
         <dl>
            <dt>404 HUB_UNAVAILABLE</dt>  <dd>Hub is unavailable</dd>
            <dt>500 INTERNAL_ERROR</dt>   <dd>An internal error has occurred</dd>
         </dl>
      </div>

      <h2>Widgets Description</h2>
      
      <div class="sample">
         <h3>Home Modes Widget</h3>
         <p class="json">
{
   "HOME_MODE" : {
      "status" : "OK",
      "currentMode" : "HOME",
      "enabled": true
   }
}
         </p>
         
         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>currentMode</dt>   <dd>The current Home Mode name. Possible values: HOME, NIGHT, AWAY, VACATION</dd>
               <dt>enabled</dt>   <dd>Indication if home modes are available for user on current tariff or not</dd>
            </dl>
         </div>
      </div>

      <div class="sample">
         <h3>Alarm Widget</h3>
         <p class="json">
{
   "ALARM" : {
      "status" : "OK",
      "behavior" : "HOME",
      "state" : "TRIGGERED",
      "details" : {
         "alarm" : "Intruder",
         "alarms" : [
            "Intruder"
         ]
      }
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>behavior</dt>    <dd>The alarm current mode. Possible values: AWAY, HOME, NIGHT</dd>
               <dt>state</dt>       <dd>The alarm current state. Possible values: ARMED, DISARMED, TRIGGERED</dd>
               <dt>details</dt>     <dd>An array with details about triggered alarms. Populated only if the alarm current state is TRIGGERED</dd>
               <dt>alarm</dt>       <dd>A name of a triggered alarm or MULTIPLE, if more than one alarm was triggered</dd>
               <dt>alarms</dt>      <dd>A list of triggered alarms</dd>
            </dl>
         </div>
      </div>
      
      <div class="sample">
         <h3>Home Status Widget</h3>
         <p class="json">
{
   "HOME_STATUS" : {
      "status" : "OK",
      "alarm" : {
         "behavior" : "AWAY",
         "state" : "ARMED",
         "details" : []
      },
      "messages" : [
         {
            "id" : 3,
            "message" : "2 devices have low battery",
            "severity" : 2
         }
      ]
   }
}
         </p>

         <div class="args">
            <dl>
               <dt>alarm</dt>    <dd>See <em>Alarm Widget</em></dd>
               <dt>messages</dt> <dd>A list of messages reflecting the system current problems</dd>
               <dt>id</dt>       <dd>A message type ID</dd>
               <dt>message</dt>  <dd>A translated message</dd>
               <dt>severity</dt> <dd>A message severity. Messages with severity 1 are the most important</dd>
            </dl>
         </div>
      </div>

      <div class="sample">
         <h3>Control Widget</h3>
         <p class="json">
{
   "CONTROL" : {
      "status" : "OK",
      "on" : 3,
      "off" : 2
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>on</dt>    <dd>A number of devices that are currently on</dd>
               <dt>off</dt>    <dd>A number of devices that are currently off</dd>
            </dl>
         </div>
      </div>

      <div class="sample">
         <h3>Camera Widget</h3>
         <p class="json">
{
   "CAMERA" : {
      "status" : "NO_DEVICE",
      "activeCameras" : 0
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>activeCameras</dt>  <dd>A number of active cameras, i.e. cameras that are available for watching video streams</dd>
            </dl>
         </div>
      </div>
   
      <div class="sample">
         <h3>Thermostat Widget</h3>
         <p class="json">
{
   "THERMOSTAT" : {
      "status" : "OK",
      "temperatureUnit" : "F",
      "currentTemperature" : 10.2,
      "targetTemperature" : 15.0
   }
}
         </p>
         
         <div class="args">
            <h3>Properties</h3>
            <dl>
               <dt>temperatureUnit</dt>      <dd>The temperature unit abbreviation. Possible values: C (Celsius), F (Farenheit)</dd>
               <dt>currentTemperature</dt>   <dd>The current temperature. Returned as a float to the nearest 0.5 degrees</dd>
               <dt>targetTemperature</dt>    <dd>The target temperature. Returned as a float to the nearest 0.5 degrees</dd>
            </dl>
         </div>
      </div>

      <div class="sample">
         <h3>Temperature Widget</h3>
         <p class="json">
{
   "TEMPERATURE" : {
      "status" : "OK",
      "outside" : 12,
      "inside" : 12,
      "weatherIcon" : "night_light_rain_showers",
      "temperatureUnit" : "C"
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>outside</dt>           <dd>The current outside temperature</dd>
               <dt>inside</dt>            <dd>The current inside temperature</dd>
               <dt>weatherIcon</dt>       <dd>A name of the weather icon to display on the widget</dd>
               <dt>temperatureUnit</dt>   <dd>The temperature unit abbreviation. Possible values: C (Celsius), F (Farenheit)</dd>
            </dl>
         </div>
         
         <p class="note">
            Outside temperature is calculated without device, 
            so "status" can be equivalent to "NO_DEVICE", but outside data is not empty.
         </p>
      </div>

      <div class="sample">
         <h3>Presence Widget</h3>
         <p class="json">
{
   "PRESENCE" : {
      "status" : "OK",
      "keyfobsAtHome" : 1
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>keyfobsAtHome</dt>  <dd>A number of keyfobs that are currently at home</dd>
            </dl>
         </div>
      </div>
   
      <div class="sample">
         <h3>Usage Widget</h3>
         <p class="json">
{
   "USAGE" : {
      "status" : "OK",
      "rightNow" : {
         "units" : "kW",
         "value" : 3.8
      }
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>rightNow</dt>    <dd>An electricity usage right now, according to a Smart Meter</dd>
               <dt>units</dt>       <dd>Units of measure</dd>
               <dt>value</dt>       <dd>The measured value</dd>
            </dl>
         </div>
      </div>
   
      <div class="sample">
         <h3>Cost Widget</h3>
         <p class="json">
{
   "COST" : {
      "status" : "OK",
      "currency" : "GBP",
      "todaySoFar" : 0.38
   }
}
         </p>

         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>currency</dt>    <dd>Currency</dd>
               <dt>todaySoFar</dt>  <dd>Electricity cost for today in terms of money</dd>
            </dl>
         </div>
      </div>
      
      <div class="sample">
         <h3>Advertisement</h3>
         <p class="json">
{
   "ADS" : {
      "status" : "OK"
   }
}
         </p>

         <div class="args">
            <dl>
               <dt>status</dt>  <dd>If status is <span class="call">OK</span> the ads should be shown to a user.
               If status is <span class="call">NOT_AVAILABLE</span> the ads should not be shown</dd>
            </dl>
         </div>
      </div>
      
      <div class="sample">
         <a name="irrigation"></a>
         <h3>Irrigation</h3>
         <p class="json">
{
   "IRRIGATION: {
      "status" :  "OK",
      "visible" : true,
      "irrigation : {
         ...
         "state" : "WATERING",
         "current" : {
            "zone" : {
               "id" :  "00-00-00-00-00-01",
               "number" : 1,
               "name": "Garden",
               "active": true,
               "color": 1,
               "image": "blue"
            }
         }
         "next" : {
            "zone" : {
               "id" :  "00-00-00-00-00-02",
               "number" : 2,
               "name": "Roses",
               "active": true,
               "color": 2,
               "image": "dark_blue"
            }
            "start": 1338210000,
            "time": "11:00 am"
         }
      }
   }
}

{
   "IRRIGATION: {
      "status" : "OK",
      "visible" : true,
      "irrigation" : {
         ...
         "state" : "IDLE",
         "next" : {
            "zone" : {
               "id" :  "00-00-00-00-00-02",
               "number" : 2,
               "name": "Roses",
               "active": true,
               "color": 2,
               "image": "dark_blue"
            }
            "start": 1338210000,
            "time": "11:00 am"
         }
      }
   }
}

   "IRRIGATION: {
      "status" : "OK",
      "visible" : true,
      "irrigation" : {
         ...
         "state" : "DELAY",
         "current" : {
            "type": "RAIN",
            "delay": 23
         }
      }
   }
}
         </p>
         <div class="args">
            <h3>Properties:</h3>
            <dl>
               <dt>state</dt>       <dd>could be <span class="call">WATERING</span>, <span class="call">IDLE</span> or <span class="call">DELAY</span></dd>
               <dt>zone</dt>        <dd>if state is <span class="call">WATERING</span> - contains information about watering zone, if state is <span class="call">IDLE</span> - contains information about next zone for watering<br/>If device is Orbit Hose End - zone doesn't contains number</dd>
               <dt>start</dt>       <dd>exists only if state is <span class="call">IDLE</span>, contains next watering start date/time</dd>
               <dt>type</dt>        <dd>exists only if state is <span class="call">DELAY</span>, contains type of delay, could be <span class="class">RAIN</span> only yet
               <dt>delay</dt>       <dd>exists only if state is <span class="call">DELAY</span>, contains rest of the delay in hours
            </dl>
         </div>
         
      </div>
   
      <div class="sample">
         <h3>Activity Log Widget</h3>
         <p class="json">
{
   "LOG" : {
      "status" : "OK",
      "data" : {
         "2012-04" : {
            "activities" : [
               {
                  "id" : "139",
                  "timestamp" : 1334134974,
                  "type" : "IADisarmed",
                  "details" : {
                     "1" : {
                        "source" : "the website"
                     }
                  }
               },
               {
                  "id" : "138",
                  "timestamp" : 1334131267,
                  "type" : "IAArmed",
                  "details" : {
                     "1" : {
                        "source" : "the website",
                        "stateName" : "away"
                     }
                  }
               }
            ]
         },
         "2012-03" : {
            "activities" : [
               {
                  "id" : "137",
                  "timestamp" : 1331561691,
                  "type" : "IADisarmed",
                  "details" : {
                     "1" : {
                        "source" : "the website"
                     }
                  }
               }
            ]
         }
      }
   }
}
         </p>
         
         <div class="args">
            <h3>Properties:</h3>
            <p class="call">See <em>/users/:u/hubs/:h/history/activities</em> for properties list</p>
         </div>
      </div>
   </div>
</div>

<div class="section">
   <h2>GET <span class="call">/dashboard/homestatus</span></h2>
   
   <p>Returns information of service status</p>

   <div class="sample">
      <h3>Sample response:</h3>
      <p class="json">
   {
      "status" : "OK",
      "messages" : [ 
         { 
            "id" : 3, 
            "message" : "2 devices have low battery", 
            "severity" : 2 
         } 
      ]
   }   
      </p>
   </div>
   
   <div class="sample">
      <h3>Response in case of internal error:</h3>
      <p class="json">
   {
      "status" : "NO_DATA"
   }   
      </p>
   </div>

</div>
    </div>
  </body>

<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/dashboard by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
</html>
