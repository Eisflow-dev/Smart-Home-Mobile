<!DOCTYPE html>
<html>
  
<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/irrigation by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <base  />
    <link rel="stylesheet" type="text/css" href="../../css.css" />
    <title>AlertMe.com API v5 Documentation :: calls/widgets/irrigation :: DRAFT</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  </head>
  <body>
    <h1>
      API v5 Documentation <span>draft</span>
    </h1>
    <div class="menu">
      <ul class="menu">
   <li><h4><a href="../../../docs.html">overview</a></h4>
      <ul>
         <li><a href="../../responses.html">responses</a></li>
         <li><a href="../../errors.html">errors</a></li>
         <li><a href="../../examples.html">examples</a></li>

      </ul>
   </li>
   <li><h4>calls</h4>
      <ul>

         <li><a href="../sessions.html">sessions</a></li>

         <li><a href="../users.html">users</a>
            <ul>

               <li><a href="../users/systemalerts.html">system alerts</a></li>

               <li><a href="../questions.html">questions</a></li>

               <li><a href="../hubs.html">hubs</a>
                  <ul>
                     <li><a href="../hubs/activityLog.html">activity log (history)</a></li>
                     <li><a href="../devices.html">devices</a>
                       <ul>

                           <li><a href="../devices/events.html">events</a></li>

                        </ul>
                     </li>
                     <li><a href="../hubs/profiles.html">profiles</a></li>

                     <li>rules
                        <ul>
                           <li><a href="../rules/actions.html">actions</a></li>
                           <li><a href="../../actions.html">action types</a></li>                           
                           <li><a href="../rules/wizard.html">wizard</a></li>
                        </ul>
                     </li>
                     <li><a href="../services.html">services</a>
                        <ul>

                           <li><a href="../services/events.html">events</a></li>

                        </ul>
                     </li>

                  </ul>
               </li>

               <li><a href="../widgets.html">widgets</a>
                  <ul>
                     <li><a href="alarm.html">alarm</a></li>
                     <li><a href="care.html">care</a></li>
                     <li><a href="cameras.html">cameras</a></li>
                     <li><a href="climate.html">climate</a></li>
                     <li><a href="dashboard.html">dashboard</a></li>
                     <li><a href="heating.html">heating</a></li>
                     <li><a href="locks.html">locks</a></li>
                     <li><a href="homestatus.html">homestatus</a></li>

                     <li><a href="presence.html">presence</a></li>
                     <li><a href="smartplugs.html">smartplugs</a></li>
                     <li><a href="swingometer.html">swingometer</a></li>
                     <li><a href="temperature.html">temperature</a></li>
                     <li><a href="usage.html">usage</a></li>
                     <li><a href="petdoors.html">petdoors</a></li>
                     <li><a href="group.html">groups</a></li>
                     <li><a href="history.html">history</a></li>
                     <li><a href="irrigation.html">irrigation</a></li>
                     <li><a href="secondaryuser.html">secondaryuser</a></li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
   </li>
</ul>
    </div>
    <div class="doc calls widgets irrigation_page">
      <div class="section">
    <p>All calls listed below follow <span class="call">/users/<em>:username</em>/widgets</span> in the URI;
       this prefix has been omitted for conciseness</p>
</div>

<div class="section">
    <h2>GET <span class="call">/irrigation</span></h2>

    <p>Return list of all irrigation devices</p>
    <div class="sample">
        <h3>Sample Response:</h3>

        <p class="json">
{
   "irrigation": [
      {
         "devices": [
            {
               "id": "00-0D-6F-00-00-AB-CE-01",
               "name": "Irrigation Controller 1"
            },
            {
               "id": "00-0D-6F-00-00-AB-CE-02",
               "name": "Irrigation Controller 2"
            },
            {
               "id": "00-0D-6F-00-00-AB-CE-03",
               "name": "Hose End Controller 3"
            }
         ]
         "active": {
            "id": "00-0D-6F-00-00-AB-CE-01",
            "type": "OrbitSprinkler",
            "name": "Irrigation Controller 1",
            "control": "SCHEDULE",
            "mode": "EVERY_DAY",
            "onOffState": "ON",
            "state": "WATERING",
            "zones": [
               {
                  "id": "AD-2E-00-00-00-00-93-01",
                  "number": 1,
                  "name": "Zone 1",
                  "active": true,
                  "color": 1,
                  "image": "blue"
               },
               {
                  "id": "AD-2E-00-00-00-00-93-02",
                  "number": 2,
                  "name": "Zone 2",
                  "active": true,
                  "color": 4,
                  "image": "dark_green"
               }
            ],
            "current": {
               "zone": {
                  "id": "AD-2E-00-00-00-00-93-01",
                  "number": 1,
                  "name": "Zone 1",
                  "active": true,
                  "color": 1,
                  "image": "blue"
               }
            },
            "next": {
               "zone": {
                  "id": "AD-2E-00-00-00-00-93-02",
                  "number": 2,
                  "name": "Zone 2",
                  "active": true,
                  "color": 4,
                  "image": "dark_green"
               },
               "start": 1338210000,
               "time": "11:00 am"
            },
         },
    },
    "widgetStatus":"OK",
    "widgetVisible":true
}
        </p>
    </div>
    <div class="args">
        <h3>Possible widgetStatuses</h3>
        <dl class="wide">
            <dt>OK</dt>
            <dd>Widget able to prepare all data</dd>
            <dt>NOT_AVAILABLE</dt>
            <dd>Widget is not available due user's subscription</dd>
            <dt>NO_DEVICE</dt>
            <dd>No device assigned to this widget</dd>
            <dt>DEVICE_MISSING</dt>
            <dd>Assigned devices are missing</dd>
            <dt>NO_DATA</dt>
            <dd>Inner error, data cannot be prepared correctly</dd>
        </dl>
    </div>
</div>

<div class="section">
    <h2>GET <span class="call">/irrigation/<em>:deviceId</em></span></h2>

    <p>Return information about irrigation device with specified ID</p>
    <div class="sample">
        <h3>Sample Response:</h3>

        <p class="json">
{
   "id": "00-0D-6F-00-00-AB-CE-01",
   "type": "OrbitSprinkler",
   "name": "Irrigation Controller 1",
   "control": "SCHEDULE",
   "mode": "EVERY_DAY",
   "onOffState": "ON",
   "state": "WATERING",
   "zones": [
      {
         "id": "AD-2E-00-00-00-00-93-01",
         "number": 1,
         "name": "Zone 1",
         "active": true,
         "color": 1,
         "image": "blue"
      },
      {
         "id": "AD-2E-00-00-00-00-93-02",
         "number": 2,
         "name": "Zone 2",
         "active": true,
         "color": 4,
         "image": "dark_green"
      }
   ],
   "current": {
      "zone": {
         "id": "AD-2E-00-00-00-00-93-01",
         "number": 1,
         "name": "Zone 1",
         "active": true,
         "color": 1,
         "image": "blue"
      }
   },
   "next": {
      "zone": {
         "id": "AD-2E-00-00-00-00-93-02",
         "number": 2,
         "name": "Zone 2",
         "active": true,
         "color": 4,
         "image": "dark_green"
      },
      "start": 1338210000,
      "time": "11:00 am"
   },
},
        </p>
        <h3>Possible Values:</h3>
        <dl>
         <dt>control</dt>
         <dd>SCHEDULE, AUTO</dd>         
        </dl>
    </div>
</div>
<div class="section">
 <h2>GET <span class="call">/irrigation/<em>:deviceId</em>/onOffState</span></h2>

 <p>Checks the on/off state of the irrigation device.</p>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
    "onOffState": "on",
    "confirmed": true
}
  </p>
  <h3>Possible Values:</h3>
  <dl>
   <dt>onOffState</dt>
   <dd>on, off</dd>
  </dl>
 </div>
</div>
<div class="section">
 <h2>PUT <span class="call">/irrigation/<em>:deviceId</em>/onOffState</span></h2>

 <p>Changes the on/off state of the irrigation device.</p>

 <div class="args">
  <h3>Arguments:</h3>
  <dl><dt>onOffState</dt>  <dd>"on" to turn on or "off" to turn off</dd></dl>
 </div>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="header">
  HTTP 204 Turning device on
  </p>
 </div>
</div>
<div class="section">
   <h2>PUT <span class="call">/irrigation/selectedDevice</span></h2>

   <p>Changes selected device for current user.</p>

   <div class="args">
      <h3>Arguments:</h3>
      <dl><dt>deviceId</dt>  <dd>device ID (for example "00-0D-6F-00-00-40-CD-B4")</dd></dl>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "MISSING_PARAMETER",
      "parameter": "deviceId"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         403 Forbidden
      </p>
      <p class="json">
{
   "error": {
      "reason": "DEVICE_NOT_AVAILABLE"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         404 Not Found
      </p>
      <p class="json">
{
   "error": {
      "reason": "DEVICE_NOT_FOUND"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
   "result": "OK"
}
      </p>
   </div>
</div>
<div class="section">
   <h2>GET<span class="call">/irrigation/<em>:deviceId</em>/control</span></h2>
   <p>Returns the current control of the the irrigation controller.</p>
   <p class="note">"control" can be any one of "MANUAL", "SCHEDULE" or "AUTO".</p>
   <p class="note">"confirmed" all commands have been accepted and confirmed by the device.</p>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
    "control": "SCHEDULE",
    "confirmed": true,
    "validControls": [
        "MANUAL",
        "SCHEDULE",
        "AUTO"
    ]
}
      </p>
   </div>
</div>
<div class="section">
   <h2>PUT<span class="call">/irrigation/<em>:deviceId</em>/control</span></h2>
   <p>Sets the irrigation controller control method.</p>
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>control</dt>
         <dd>"MANUAL", "SCHEDULE", "AUTO"</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
HTTP 204 Accepted
      </p>
   </div>
</div>
<div class="section">
   <h2>PUT<span class="call">/irrigation/<em>:deviceId</em>/delay</span></h2>
   <p>Sets rain delay for irrigation controller</p>
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>delay</dt>
         <dd>integer. Number of hours of delay. Should be greater than 0</dd>
      </dl>
   </div>
</div>
<div class="section">
   <h2>PUT<span class="call">/irrigation/<em>:deviceId</em>/state</span></h2>
   <p>Immediately starts single zone irrigation for defined duration of time</p>
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>zoneId</dt>
         <dd>string. ID of zone for irrigation</dd>
         <dt>duration</dt>
         <dd>integer. Number of minutes for irrigation. Should be greater than 0</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "MISSING_PARAMETER",
      "parameter": "zoneId"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         403 Forbidden
      </p>
      <p class="json">
{
   "error": {
      "reason": "DEVICE_IS_BUSY"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         403 Forbidden
      </p>
      <p class="json">
{
   "error": {
      "reason": "ZONE_NOT_ACTIVE"
   }
}
      </p>
   </div>   
   
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         404 Not Found
      </p>
      <p class="json">
{
   "error": {
      "reason": "ZONE_NOT_FOUND"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
   "result": "OK"
}
      </p>
   </div>
</div>
<div class="section">
   <h2>PUT<span class="call">/irrigation/<em>:deviceId</em>/stop</span></h2>
   <p>Immediately stops current watering or rain delay</p>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
   "result": "OK"
}
      </p>
   </div>
</div>
<div class="section">
   <h2>GET<span class="call">/irrigation/<em>:deviceId</em>/schedule</span></h2>
   <p>Returns schedule information.</p>
   <p class="note">When in 'Every day' irrigation mode will return schedule for every weekday, when in 'Odd and Even' will return schedule for odd and even days.</p>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
    "formatting": {
        "locale": "en-GB",
        "timezoneOffset": "+03:30"
    },
    "mode": "EVERY_DAY",
    "control": "SCHEDULE",
    "days": {
        "MONDAY": [
            {
                "zone": 1,
                "begin": "06:00",
                "end": "07:00"
            },
            {
                "zone": 2,
                "begin": "07:00",
                "end": "08:00",
            },
        ],
        "TUESDAY": [
            {
                "zone": 2,
                "begin": "06:00",
                "end": "07:00"
            },
            {
                "zone": 1,
                "begin": "07:00",
                "end": "08:00"
            },
        ],
        "WEDNESDAY": [
            {
                "zone": 1,
                "begin": "06:00",
                "end": "06:00"
            },
            {
                "zone": 2,
                "begin": "07:00",
                "end": "08:00"
            },
            {
                "zone": 3,
                "begin": "08:00",
                "end": "08:30"
            }
        ],
        "THURSDAY": [
            {
                "zone": 1,
                "begin": "06:00",
                "end": "06:30"
            }
        ],
        "FRIDAY": [
                "zone": 3,
                "begin": "10:30",
                "end": "11:00"
        ],
        "SATURDAY": [
        ],
        "SUNDAY": [
        ],
    },
    "keys": [
        "MONDAY",
        "TUESDAY",
        "WEDNESDAY",
        "THURSDAY",
        "FRIDAY",
        "SATURDAY",
        "SUNDAY"
    ],
}
        </p>
    </div>
</div>
<div class="section">
   <h2>POST <span class="call">/irrigation/<em>:deviceId</em>/schedule</span></h2>
   <p>Sets the irrigation controller's schedule for schedule control.</p>
   <p class="note">Times should be given in 24h HH:MM format.</p>
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>mode</dt>
         <dd>EVERY_DAY</dd>
         <dt>days[MON][0][begin]</dt>
         <dd>06:00</dd>
         <dt>days[MON][0][end]</dt>
         <dd>06:30</dd>
         <dt>days[MON][0][zone]</dt>
         <dd>1</dd>
         <dt>days[MON][1][begin]</dt>
         <dd>08:00</dd>
         <dt>days[MON][0][end]</dt>
         <dd>08:30</dd>
         <dt>days[MON][1][zone]</dt>
         <dd>2</dd>
         <dt>days[MON][2][begin]</dt>
         <dd>19:00</dd>
         <dt>days[MON][2][begin]</dt>
         <dd>20:00</dd>
         <dt>days[MON][2][zone]</dt>
         <dd>3</dd>
         <dt>days[TUE][0][begin]</dt>
         <dd>06:00</dd>
         <dt>days[TUE][0][end]</dt>
         <dd>07:00</dd>
         <dt>days[TUE][0][zone]</dt>
         <dd>2</dd>
         <dt>days[TUE][1][begin]</dt>
         <dd>08:00</dd>
         <dt>days[TUE][1][end]</dt>
         <dd>09:00</dd>
         <dt>days[TUE][1][zone]</dt>
         <dd>1</dd>
         <dt>days[WED][0][begin]</dt>
         <dd>06:00</dd>
         <dt>days[WED][0][end]</dt>
         <dd>07:00</dd>
         <dt>days[WED][0][zone]</dt>
         <dd>1</dd>
         <dt>...</dt>
      </dl>
      <h3>OR</h3>
      <dl>
         <dt>mode</dt>
         <dd>ODD_EVEN</dd>
         <dt>days[ODD][0][begin]</dt>
         <dd>06:00</dd>
         <dt>days[ODD][0][end]</dt>
         <dd>07:00</dd>
         <dt>days[ODD][0][zone]</dt>
         <dd>1</dd>
         <dt>days[ODD][1][begin]</dt>
         <dd>08:00</dd>
         <dt>days[ODD][1][end]</dt>
         <dd>09:00</dd>
         <dt>days[ODD][1][zone]</dt>
         <dd>2</dd>
         <dt>days[ODD][2][begin]</dt>
         <dd>19:00</dd>
         <dt>days[ODD][2][end]</dt>
         <dd>20:00</dd>
         <dt>days[ODD][2][zone]</dt>
         <dd>3</dd>
         <dt>days[EVEN][0][begin]</dt>
         <dd>06:00</dd>
         <dt>days[EVEN][0][end]</dt>
         <dd>07:00</dd>
         <dt>days[EVEN][0][zone]</dt>
         <dd>3</dd>
         <dt>days[EVEN][1][begin]</dt>
         <dd>08:00</dd>
         <dt>days[EVEN][1][end]</dt>
         <dd>09:00</dd>
         <dt>days[EVEN][1][zone]</dt>
         <dd>2</dd>
         <dt>days[EVEN][2][begin]</dt>
         <dd>19:00</dd>
         <dt>days[EVEN][2][end]</dt>
         <dd>20:00</dd>
         <dt>days[EVEN][2][zone]</dt>
         <dd>1</dd>
         <dt>days[EVEN][3][begin]</dt>
         <dd>22:00</dd>
         <dt>days[EVEN][3][end]</dt>
         <dd>23:00</dd>
         <dt>days[EVEN][3][zone]</dt>
         <dd>4</dd>
      </dl>
   </div>
   <div class="sample">
   <h3>Sample Response:</h3>
      <p class="header">
         HTTP 204 Accepted
      </p>
   </div>
</div>
<div class="section">
   <h2>PUT <span class="call">/irrigation/<em>:deviceId</em>/saver</span></h2>
   <p>Set water saver and apply it to the current schedule  </p>
   <p class="note">
        Currently we try to resolve all the duration and overlapping errors
        that can occur while applying water saver,
        response 'correct' parameter indicates whether we had such errors (correct==0)
        or not (correct==1)
   </p>
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>saverValue</dt>
         <dd>10,20,30,40,...,90 and 0 for normal value</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
   "status": "true",
   "correct" : 0|1,
   "schedule" : {
        "MONDAY": [
            {
                "06:00",
                "10",
                1
            },
            {
                "06:10",
                "10",
                2
            },
        ]
    },
}
      </p>
   </div>
</div>
    </div>
  </body>

<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/irrigation by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:16 GMT -->
</html>
