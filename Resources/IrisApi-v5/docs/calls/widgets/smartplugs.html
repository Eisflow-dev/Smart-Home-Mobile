<!DOCTYPE html>
<html>
  
<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/smartplugs by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <base  />
    <link rel="stylesheet" type="text/css" href="../../css.css" />
    <title>AlertMe.com API v5 Documentation :: calls/widgets/smartplugs :: DRAFT</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  </head>
  <body>
    <h1>
      API v5 Documentation <span>draft</span>
    </h1>
    <div class="menu">
      <ul class="menu">
   <li><h4><a href="../../../docs.html">overview</a></h4>
      <ul>
         <li><a href="../../responses.html">responses</a></li>
         <li><a href="../../errors.html">errors</a></li>
         <li><a href="../../examples.html">examples</a></li>

      </ul>
   </li>
   <li><h4>calls</h4>
      <ul>

         <li><a href="../sessions.html">sessions</a></li>

         <li><a href="../users.html">users</a>
            <ul>

               <li><a href="../users/systemalerts.html">system alerts</a></li>

               <li><a href="../questions.html">questions</a></li>

               <li><a href="../hubs.html">hubs</a>
                  <ul>
                     <li><a href="../hubs/activityLog.html">activity log (history)</a></li>
                     <li><a href="../devices.html">devices</a>
                       <ul>

                           <li><a href="../devices/events.html">events</a></li>

                        </ul>
                     </li>
                     <li><a href="../hubs/profiles.html">profiles</a></li>

                     <li>rules
                        <ul>
                           <li><a href="../rules/actions.html">actions</a></li>
                           <li><a href="../../actions.html">action types</a></li>                           
                           <li><a href="../rules/wizard.html">wizard</a></li>
                        </ul>
                     </li>
                     <li><a href="../services.html">services</a>
                        <ul>

                           <li><a href="../services/events.html">events</a></li>

                        </ul>
                     </li>

                  </ul>
               </li>

               <li><a href="../widgets.html">widgets</a>
                  <ul>
                     <li><a href="alarm.html">alarm</a></li>
                     <li><a href="care.html">care</a></li>
                     <li><a href="cameras.html">cameras</a></li>
                     <li><a href="climate.html">climate</a></li>
                     <li><a href="dashboard.html">dashboard</a></li>
                     <li><a href="heating.html">heating</a></li>
                     <li><a href="locks.html">locks</a></li>
                     <li><a href="homestatus.html">homestatus</a></li>

                     <li><a href="presence.html">presence</a></li>
                     <li><a href="smartplugs.html">smartplugs</a></li>
                     <li><a href="swingometer.html">swingometer</a></li>
                     <li><a href="temperature.html">temperature</a></li>
                     <li><a href="usage.html">usage</a></li>
                     <li><a href="petdoors.html">petdoors</a></li>
                     <li><a href="group.html">groups</a></li>
                     <li><a href="history.html">history</a></li>
                     <li><a href="irrigation.html">irrigation</a></li>
                     <li><a href="secondaryuser.html">secondaryuser</a></li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
   </li>
</ul>
    </div>
    <div class="doc calls widgets smartplugs_page">
      <div class="section">
    <p>All calls listed below follow <span class="call">/users/<em>:username</em>/widgets</span> in the URI;
    	this prefix has been omitted for conciseness</p>
</div>

<div class="section">
    <h2>GET <span class="call">/smartplugs/:id</span></h2>

    <p>Return list of all smartplugs, plus <em>At a glance</em> info for all smartplugs.
    </p>
    <p class="note">
      <code>controlType</code> can be:
       <ul>
            <li>POWER - devices that can report power</li>
            <li>INTENSITY - devices that can change intensity</li>
            <li>BLIND - window blinds</li>
            <li>FAN - ventilator or fan</li>
            <li>LOCK - devices that can be locked\unlocked</li>
            <li>GENERAL - all other devices</li>
       </ul>
    </p>
    <p class="note">costs are normally in <strong>pence</strong> (or cents, in the US or the eurozone)
    but cost units are returned for display purposes</p>
    <p class="note">power readings are in <strong>watts</strong></p>
    <p class="note"><code>howAmIDoing</code> is returned as an integer in the range 1...7;
    </p>
    <ul>
    <li>1 is green (predicted usage much lower than yesterday),</li>
    <li>4 is yellow (predicted usage about the same as yesterday),</li>
    <li>7 is red (predicted usage much higher than yesterday)</li>
    </ul>
    <p class="note"><code>changeSummary</code> return values are: <code>NO_DATA_FROM_YESTERDAY,
    ABOUT_SAME_AS_YESTERDAY, MORE_THAN_YESTERDAY, LESS_THAN_YESTERDAY, NO_DATA.</code>
    The application developer can use this value to decide which status message and summary arrow
    to display, as on the AlertMe site.</p>
    <p class="note">if <code>presence</code> is false, the application should display
    "no data" indicators; e.g. <strong>--W</strong> for power now,
    and <em>"Unable to reach this smartplug"</em> or similar as a status message.</p>
    <p class="note">If the smartplug does not support dimming <code>intensity</code>
    will be <code>null</code></p>
    <p class="note">
       If the plug is a smartplug, <code>applianceType</code> can be:
       <ul>
            <li>smartplug</li>
            <li>audio_visual</li>
            <li>computer</li>
            <li>dryer</li>
            <li>fan</li>
            <li>fridge</li>
            <li>games</li>
            <li>heater</li>
            <li>iron</li>
            <li>kettle</li>
            <li>lights</li>
            <li>microwave</li>
            <li>mixer</li>
            <li>printer</li>
            <li>router</li>
            <li>satellite</li>
            <li>toaster</li>
            <li>tv</li>
            <li>washing_machine</li>
            <li>gdocontroller</li>
       </ul>
   </p>
   <p class="note">
      If the plug is a blind, <code>applianceType</code> can be:
       <ul>
            <li>roller</li>
            <li>tilt</li>
            <li>group</li>
       </ul>
    </p>
   <p class="note">
      If the plug is a fan, <code>speed</code> can be:
       <ul>
            <li>OFF</li>
            <li>LOW</li>
            <li>MEDIUM</li>
            <li>HIGH</li>
       </ul>
    </p>
    <div class="args">
     <h3>Arguments:</h3>
     <dl>
        <dt><code>forceUpdate</code></dt>
        <dd>[optional] boolean <em>true</em> or <em>false</em>. Applied for Z-Wave devices:
            force update when true or return cached value when false. Default - <em>false</em>.
        </dd>
     </dl>
    </div>
    <div class="sample">
        <h3>Sample Response:</h3> (when no id provided)

        <p class="json">
{
   "smartplugs": [
      {
         "id":                 "00-00-00-C0-02-2E-3D-DD",
         "name":               "Powerbar II",
         "type":               "SmartPlug",
         "controlType":        "POWER",
         "plugType":           "old_uk",
         "presence":           true,
         "onOffState":         "on",
         "supportsIntensity":  false,
         "intensity":          null,
         "supportsSpeed":      false,
         "speed":              null,
         "applianceType":      "SMARTPLUG",
         "howAmIDoing":        1,
         "currency":           "GBP",
         "costUnits":          "p",
         "remoteMode":         true,
         "supportsPower":      true,
         "costSoFarToday":     3,
         "costPredictedToday": 14,
         "costYesterday":      13,
         "powerNow":           57,
         "powerUnits":         "W",
         "presenceYesterday":  true,
         "changeSummary":      "MORE_THAN_YESTERDAY",
         "scheduleEnabled":    true,
         "supportsLock":       true,
         "isLocked":           NULL,
         "nextEvent":          {
            "action":    "ON",
            "timestamp": "1360717200"
         }
      },
      {
         "id":                 "AD-05-00-E0-5F-0B-B7-15",
         "name":               "Hall Light",
         "type":               "JascoDimmer",
         "controlType":        "INTENSITY",
         "plugType":           "us",
         "presence":           true,
         "onOffState":         "on",
         "supportsIntensity":  true,
         "intensity":          90,
         "supportsSpeed":      false,
         "speed":              null,
         "applianceType":      "LIGHTS",
         "currency":           "GBP",
         "costUnits":          "Â£",
         "powerUnits":         "W",
         "remoteMode":         "False",
         "supportsPower":      false,
         "howAmIDoing":        4,
         "costSoFarToday":     "--",
         "costYesterday":      "--",
         "costPredictedToday": "--",
         "powerNow":           null,
         "changeSummary":      "NO_DATA_FROM_YESTERDAY",
         "presenceYesterday":  false,
         "scheduleEnabled":    true,
         "nextEvent":          null,
         "supportsLock":       true,
         "isLocked":           NULL
      },
      {
         "id":                 "AD-05-01-D5-1E-37-AC-09",
         "name":               "garage door",
         "type":               "GDOTakeOverUnit",
         "controlType":        "LOCK",
         "plugType":           NULL,
         "presence":           false,
         "onOffState":         "UNAVAILABLE",
         "lastKnownState":     "off",
         "supportsIntensity":  false,
         "intensity":          NULL,
         "supportsSpeed":      false,
         "speed":              NULL,
         "applianceType":      "GDOCONTROLLER",
         "currency":           "USD",
         "costUnits":          "$",
         "powerUnits":         "W",
         "remoteMode":         false,
         "supportsPower":      false,
         "scheduleEnabled":    false,
         "howAmIDoing":        4,
         "costSoFarToday":     "--",
         "costYesterday":      "--",
         "costPredictedToday": "--",
         "powerNow":           NULL,
         "changeSummary":      "NO_DATA_FROM_YESTERDAY",
         "presenceYesterday":  false,
         "nextEvent":          NULL,
         "supportsLock":       true,
         "isLocked":           NULL
      }
   ],
   "atAGlance": {
      "energyHogToday":      "00-00-00-D1-13-3F-4E-EE",
      "energyHogYesterday":  "00-00-00-C0-02-2E-3D-DD",
      "plugsOn":             2,
      "plugsTotal":          4,
      "heavyHour":           15,
      "minimumPower":        0
   },
   "widgetStatus":"OK",
   "widgetVisible":true
}
        </p>
    </div>

    <div class="args">
        <h3>Possible widgetStatuses</h3>
        <dl class="wide">
            <dt>OK</dt>
            <dd>Widget able to prepare all data</dd>
            <dt>NOT_AVAILABLE</dt>
            <dd>Widget is not available due user's subscription</dd>
            <dt>NO_DEVICE</dt>
            <dd>No device assigned to this widget</dd>
            <dt>DEVICE_MISSING</dt>
            <dd>Assigned devices are missing</dd>
            <dt>NO_DATA</dt>
            <dd>Inner error, data cannot be prepared correctly</dd>
        </dl>
    </div>

</div>

<div class="section">
 <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/onOffState</span></h2>

 <p>Checks the on/off state of the smartplug.</p>

 <div class="args">
  <h3>Arguments:</h3>
  <dl>
   <dt><code>forceUpdate</code></dt>
   <dd>[optional] boolean <em>true</em> or <em>false</em>. Applied for Z-Wave devices:
       force update when true or return cached value when false. Default - <em>false</em>.
   </dd>
  </dl>
 </div>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
    "onOffState": "on"
}
  </p>
  <h3>Possible Values:</h3>
  <dl>
   <dt>onOffState</dt>
   <dd>on, off</dd>
  </dl>
 </div>

</div>

<div class="section">
 <h2>PUT <span class="call">/smartplugs/<em>:deviceId</em>/onOffState</span></h2>

 <p>Changes the on/off state of the smartplug.</p>

 <p class="note">
    You can use "all" instead of <code>:deviceId</code>, then call will change state of all plugs.
 </p>

 <div class="args">
  <h3>Body:</h3>
  <dl><dt>onOffState</dt>  <dd>"on" to turn on or "off" to turn off</dd></dl>
 </div>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="header">
  HTTP 204 Turning relay on
  </p>
 </div>
</div>

<div class="section">
 <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/lockState</span></h2>

 <p>Checks the lock state of the smartplug.</p>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
    "isLocked": true
}
  </p>
  <h3>Possible Values:</h3>
  <dl>
   <dt>isLocked</dt>
   <dd>true, false</dd>
  </dl>
 </div>

</div>

<div class="section">
 <h2>PUT <span class="call">/smartplugs/<em>:deviceId</em>/lockState</span></h2>

 <p>Changes the lock state of the smartplug.</p>

 <div class="args">
  <h3>Body:</h3>
  <dl><dt>isLocked</dt>  <dd><b>true</b> to lock up or <b>false</b> to unlock</dd></dl>
 </div>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="header">
   HTTP 204 Lock state of the device changed to "locked"
  </p>
 </div>
 
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="header">
  HTTP 400
  </p>
  <p class="json">
{
   "error": {
      "reason": "NOT_SUPPORTED"
   }
}
  </p>
 </div>
</div>

<div class="section">
   <h2>PUT <span class="call">/smartplugs/<em>:deviceId</em>/blindState</span></h2>

   <p>Changes the state of the blind.</p>

   <div class="args">
      <h3>Body:</h3>
      <dl><dt>blindState</dt>  <dd>up, down or favorite</dd></dl>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 403 Forbidden
      </p>
      <p class="json">
{
   "error": {
      "reason": "NOT_PERMITTED"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "MISSING_PARAMETER",
      "parameter": "blindState"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "INVALID_PARAMETER",
      "parameter": "blindState",
      "range": "up,down,favorite"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 204 No Content
      </p>
   </div>
</div>

<div class="section">
 <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/intensity</span></h2>

 <p>Returns the intensity of the smartplug form 0 to 100 where 0 is off.</p>
 <p class="note">Intesity si not supported by all devices</p>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
    "intensity": 80
}
  </p>
  <h3>Possible Values:</h3>
  <dl>
   <dt>intensity</dt>
   <dd>int 0 to 100</dd>
  </dl>
 </div>

</div>

<div class="section">
 <h2>PUT <span class="call">/smartplugs/<em>:deviceId</em>/intensity</span></h2>

 <p>Changes the intensity of the smartplug form 0 to 100 where 0 is off.</p>

 <div class="args">
  <h3>Body:</h3>
  <dl><dt>intensity</dt>  <dd>int 0 to 100</dd></dl>
 </div>

 <p class="note">You can pass number with sign, so intensity will be increased by this value, f.ex. +10 or -20</p>
 <p class="note">Do not forget urlencode sign, for example "+" => "%2B"</p>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="header">
  HTTP 204 Setting intensity
  </p>
 </div>
</div>

<div class="section">
   <h2>PUT <span class="call">/smartplugs/<em>:deviceId</em>/speed</span></h2>

   <p>Changes the speed of the fan</p>

   <div class="args">
      <h3>Body:</h3>
      <dl><dt>speed</dt> <dd>string OFF|LOW|MEDIUM|HIGH</dd></dl>
   </div>

   <p class="note">If device is turned off and you try to set a speed (except OFF), it will be turned on</p>
   <p class="note">If device is turned OFF and again ON with ON/OFF button, it will be turned ON with previous speed</p>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "MISSING_PARAMETER",
      "parameter": "speed",
   }
}
      </p>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "INVALID_PARAMETER",
      "parameter": "speed",
      "range": "OFF,LOW,MEDIUM,HIGH"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 400 Bad Request
      </p>
      <p class="json">
{
   "error": {
      "reason": "INVALID_PARAMETER",
      "parameter": "speed",
      "range": "OFF,LOW,MEDIUM,HIGH"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 403 Forbidden
      </p>
      <p class="json">
{
   "error": {
      "reason": "NOT_PERMITTED"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 500 Internal Server Error
      </p>
      <p class="json">
{
   "error": {
      "reason": "HUBSERVER_REQUEST_FAILED"
   }
}
      </p>
   </div>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="header">
         HTTP 204 No Content
      </p>
   </div>
</div>

<div class="section">
    <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/cost/detail</span></h2>

    <p>Returns detailed information on the costs for the smartplug.</p>

    <p class="note">cost is in terms of money (currency value)</p>
    <p class="note">period is the current displayed period</p>
    <p class="note">periods is a list of all available periods</p>

    <div class="args">
        <h3>Arguments:</h3>
        <dl>
            <dt>period</dt>
            <dd>one of hourView, today, yesterday, dayView, thisWeek, weekView, thisMonth, monthView, thisYear,
                yearView, custom
            </dd>
            <dt>year</dt>
            <dd>is a full numeric representation of a year, 4 digits. Should be presented when the period argument is
                one of the following: hourView, dayView, weekView, monthView, yearView
            </dd>
            <dt>month</dt>
            <dd>is a numeric representation of a month, 1 or 2 digits. Should be presented when the period argument is
                one of the following: hourView, dayView, monthView
            </dd>
            <dt>day</dt>
            <dd>is a day of the day, 1 or 2 digits. Should be presented when the period argument is one of the
                following: hourView, dayView
            </dd>
            <dt>week</dt>
            <dd>is ISO-8601 week number of year, weeks starting on Monday. Should be presented when the period argument
                is weekView
            </dd>
            <dt>hour</dt>
            <dd>is 24-hour format of an hour, 1 or 2 digits</dd>
            <dt>year_from</dt>
            <dd>is a full numeric representation of a year, 4 digits. Should be presented when the period argument is
                custom
            </dd>
            <dt>month_from</dt>
            <dd>is a numeric representation of a month, 1 or 2 digits. Should be presented when the period argument is
                custom
            </dd>
            <dt>day_from</dt>
            <dd>is a day of the day, 1 or 2 digits. Should be presented when the period argument is custom</dd>
            <dt>hour_from</dt>
            <dd>is 24-hour format of an hour, 1 or 2 digits. Should be presented when the period argument is custom</dd>
            <dt>year_to</dt>
            <dd>is a full numeric representation of a year, 4 digits. Should be presented when the period argument is
                custom
            </dd>
            <dt>month_to</dt>
            <dd>is a numeric representation of a month, 1 or 2 digits. Should be presented when the period argument is
                custom
            </dd>
            <dt>day_to</dt>
            <dd>is a day of the day, 1 or 2 digits. Should be presented when the period argument is custom</dd>
            <dt>hour_to</dt>
            <dd>is 24-hour format of an hour, 1 or 2 digits. Should be presented when the period argument is custom</dd>
        </dl>
    </div>

    <div class="sample">
        <h3>Sample Requests:</h3>
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=thisYear</p>
        <p class="call">returns costs detail for current year by months</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=thisMonth</p>
        <p class="call">returns costs detail for current month by days</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=thisWeek</p>
        <p class="call">returns costs detail for current week by days</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=today</p>
        <p class="call">returns costs detail for today by 30 minutes</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=yesterday</p>
        <p class="call">returns costs detail for yesterday by 30 minutes</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=thisHour</p>
        <p class="call">returns costs detail for current hour by 30 minutes</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=yearView&amp;year=2010</p>
        <p class="call">returns costs detail for 2010 year by months</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=monthView&amp;year=2010&amp;month=11</p>
        <p class="call">returns costs detail for November 2010 by days</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=weekView&amp;year=2010&amp;week=36</p>
        <p class="call">returns costs detail for the 36th week of 2010 by days</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=dayView&amp;year=2010&amp;month=11&amp;day=23</p>
        <p class="call">returns costs detail for 23.11.2010 by hours</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=hourView&amp;year=2010&amp;month=11&amp;day=23&amp;hour=15</p>
        <p class="call">returns costs detail for 3 PM of 23.11.2010 by 30 minutes</p><br />
        <p class="call">/smartplugs/00-0D-6F-00-00-C5-43-E9/cost/detail?period=custom&amp;year_from=2010&amp;month_from=10&amp;day_from=17&amp;hour_from=13&amp;year_to=2010&amp;month_to=10&amp;day_to=22&amp;hour_to=17</p>
        <p class="call">returns costs detail from 1 PM 17.10.2010 to 5 PM 22.10.2010 by days</p><br />
    </div>

    <div class="sample">
        <h3>Sample Response:</h3>

        <p class="json">
{
    "period"         : "monthView",
    "periods"        : [
                           "thisHour",
                           "hourView",
                           "today",
                           "yesterday",
                           "dayView",
                           "thisWeek",
                           "weekView",
                           "thisMonth",
                           "monthView",
                           "thisYear",
                           "yearView",
                           "custom"
                       ],
    "data"           : [
                                 {"date": "2010-05-01", "cost" : 1.1},
                                 {"date": "2010-05-02", "cost" : 1.5},
                                 {"date": "2010-05-03", "cost" : 1.2},
                                 ...,
                                 {"date": "2010-05-28", "cost" : 0.9},
                                 {"date": "2010-05-29", "cost" : 0.8},
                                 {"date": "2010-05-30", "cost" : 1.3}
                       ],
    "currency"       : "GBP"
}
        </p>

       <p class="note">hourView, dayView, weekView, monthView and yearView will appear/disappear corresponding to
          request (request should contain appropriate argument)</p>
    </div>

    <div class="errors">
        <h3>Returned errors:</h3>
        <dl>
            <dt>404 INVALID_PARAMETER</dt>    <dd>The requested <em>:energyType</em> is not valid. Must be <em>gas</em> or <em>electricity</em></dd>
            <dt>404 INVALID_PERIOD</dt>  <dd>:period is invalid</dd>
            <dt>400 MISSING_PARAMETER</dt>  <dd>One of :year, :month, :day, :week, :hour, :year_from, :month_from, :day_from, :year_to, :month_to, :day_to is missing from request</dd>
            <dt>400 INVALID_PARAMETER</dt>  <dd>One of :year, :month, :day, :week, :hour, :year_from, :month_from, :day_from, :year_to, :month_to, :day_to is invalid</dd>
            <dt>404 NO_DATA</dt>  <dd>There was no stored data to return in the request period specified.</dd>
        </dl>
    </div>
</div>

<div class="section">
    <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/usage/detail</span></h2>

    <p>Returns detailed information on the usage for the smartplug.</p>

    <p class="note">usage is in kWh</p>
    <p class="note">period is the current displayed period</p>
    <p class="note">periods is a list of all available periods</p>

    <div class="args">
        <h3>Arguments:</h3>
        <p>See </p>
        <p><span class="call">/smartplugs/<em>:deviceId</em>/cost/detail</span></p>
    </div>

    <div class="args">
        <h3>Sample Requests:</h3>
        <p>See </p>
        <p><span class="call">/smartplugs/<em>:deviceId</em>/cost/detail</span></p>
        <p>Use <em>usage</em> instead of <em>cost</em></p>
    </div>

    <div class="sample">
        <h3>Sample Response:</h3>

        <p class="json">
{
    "period"         : "monthView",
    "periods"        : [
                           "thisHour",
                           "hourView",
                           "today",
                           "yesterday",
                           "dayView",
                           "thisWeek",
                           "weekView",
                           "thisMonth",
                           "monthView",
                           "thisYear",
                           "yearView",
                           "custom"
                       ],
    "data"           : [
                           {"date": "2010-05-01", "usage" : 1.1},
                           {"date": "2010-05-02", "usage" : 1.5},
                           {"date": "2010-05-03", "usage" : 1.2},
                           ...,
                           {"date": "2010-05-28", "usage" : 0.9},
                           {"date": "2010-05-29", "usage" : 0.8},
                           {"date": "2010-05-30", "usage" : 1.3}
                       ]
}
        </p>

       <p class="note">hourView, dayView, weekView, monthView and yearView will appear/disappear corresponding to
          request (request should contain appropriate argument)</p>
    </div>

    <div class="errors">
        <h3>Returned errors:</h3>
        <dl>
            <dt>404 INVALID_PARAMETER</dt>    <dd>The requested <em>:energyType</em> is not valid. Must be <em>gas</em> or <em>electricity</em></dd>
            <dt>404 INVALID_PERIOD</dt>  <dd>:period is invalid</dd>
            <dt>400 MISSING_PARAMETER</dt>  <dd>One of :year, :month, :day, :week, :hour, :year_from, :month_from, :day_from, :year_to, :month_to, :day_to is missing from request</dd>
            <dt>400 INVALID_PARAMETER</dt>  <dd>One of :year, :month, :day, :week, :hour, :year_from, :month_from, :day_from, :year_to, :month_to, :day_to is invalid</dd>
            <dt>404 NO_DATA</dt>  <dd>There was no stored data to return in the request period specified.</dd>
        </dl>
    </div>
</div>

<div class="section">
    <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/power/detail</span></h2>

    <p>Returns detailed information on the average power for the smartplug.</p>

    <p class="note">power is in W</p>
    <p class="note">period is the current displayed period</p>
    <p class="note">periods is a list of all available periods</p>

    <div class="args">
        <h3>Arguments:</h3>
        <p>See </p>
        <p><span class="call">/smartplugs/<em>:deviceId</em>/cost/detail</span></p>
    </div>

    <div class="args">
        <h3>Sample Requests:</h3>
        <p>See </p>
        <p><span class="call">/smartplugs/<em>:deviceId</em>/cost/detail</span></p>
        <p>Use <em>usage</em> instead of <em>cost</em></p>
    </div>

    <div class="sample">
        <h3>Sample Response:</h3>

        <p class="json">
{
    "period"         : "monthView",
    "periods"        : [
                           "thisHour",
                           "hourView",
                           "today",
                           "yesterday",
                           "dayView",
                           "thisWeek",
                           "weekView",
                           "thisMonth",
                           "monthView",
                           "thisYear",
                           "yearView",
                           "custom"
                       ],
    "data"           : [
                           {"date": "2010-05-01", "power" : 11},
                           {"date": "2010-05-02", "power" : 15},
                           {"date": "2010-05-03", "power" : 12},
                           ...,
                           {"date": "2010-05-28", "power" : 9},
                           {"date": "2010-05-29", "power" : 8},
                           {"date": "2010-05-30", "power" : 13}
                       ]
}
        </p>

       <p class="note">hourView, dayView, weekView, monthView and yearView will appear/disappear corresponding to
          request (request should contain appropriate argument)</p>
    </div>

    <div class="errors">
        <h3>Returned errors:</h3>
        <dl>
            <dt>404 INVALID_PARAMETER</dt>    <dd>The requested <em>:energyType</em> is not valid. Must be <em>gas</em> or <em>electricity</em></dd>
            <dt>404 INVALID_PERIOD</dt>  <dd>:period is invalid</dd>
            <dt>400 MISSING_PARAMETER</dt>  <dd>One of :year, :month, :day, :week, :hour, :year_from, :month_from, :day_from, :year_to, :month_to, :day_to is missing from request</dd>
            <dt>400 INVALID_PARAMETER</dt>  <dd>One of :year, :month, :day, :week, :hour, :year_from, :month_from, :day_from, :year_to, :month_to, :day_to is invalid</dd>
            <dt>404 NO_DATA</dt>  <dd>There was no stored data to return in the request period specified.</dd>
        </dl>
    </div>
</div>
        
<div class="section">
   <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/events</span></h2>
   
   <p>Returns information on all events that can be triggered by the device</p>
   
   <div class="sample">
      <h3>Sample response</h3>
      <p class="json">
[
   {
      "time" : "10:30",
      "days" : [
         "MONDAY",
         "FRIDAY"
      ],
      "date" : null
   },
   {
      "time" : "20:00",
      "days" : null,
      "date" : "2012-04-06"
   }
]
      </p>

      <p class="note">days is either an array of days of week or null</p>
      <p class="note">date is either a date in ISO-8601 format or null</p>
   </div>

   <div class="errors">
      <h3>Returned errors</h3>
      <dl>
         <dt>404 INVALID_PARAMETER</dt>   <dd>A smartplug with <em>:deviceId</em> was not found</dd>
      </dl>
   </div>
</div>

<div class="section">
   <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/actions</span></h2>

   <p>Returns information on all timed actions of the smartplug and the events that trigger those actions</p>
   
   <div class="sample">
      <h3>Sample response</h3>
      <p class="json">
[
   {
      "id" : 1,
      "action" : "ON",
      "time" : "10:30",
      "days" : [
         "MONDAY",
         "FRIDAY"
      ],
      "date" : null
   },
   {
      "id" : 2,
      "action" : "OFF",
      "time" : "20:00",
      "days" : null,
      "date" : "2012-04-06"
   }
]
      </p>
      
      <p class="note">id is an action ID in the database</p>
      <p class="note">days is either an array of days of week or null</p>
      <p class="note">date is either a date in ISO-8601 format or null</p>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>404 INVALID_PARAMETER</dt>   <dd>A smartplug with <em>:deviceId</em> was not found</dd>
      </dl>
   </div>
</div>
        
<div class="section">
   <h2>GET <span class="call">/smartplugs/<em>:deviceId</em>/actions/<em>:id</em></span></h2>
   
   <p>Returns detailed information on the action with the specified ID</p>
   
   <p class="note">id is an ID of the action in the database</p>
   
   <div class="sample">
      <h3>Sample response:</h3>
      <p class="json">
{
   "id" : 108,
   "action" : "ON",
   "time" : "21:00",
   "days" : null,
   "date" : "2012-04-06"
}
      </p>

      <p class="note">id is an action ID in the database</p>
      <p class="note">days is either an array of days of week or null</p>
      <p class="note">date is either a date in ISO-8601 format or null</p>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>404 INVALID_PARAMETER</dt>   <dd>Invalid <em>:id</em> parameter</dd>
         <dt>500 INTERNAL_ERROR</dt>   <dd>An internal error has occurred.
This might be either because a device with ID <em>:deviceId</em> was not found or an event is invalid.</dd>
      </dl>
   </div>
</div>

<div class="section">
   <h2>PUT /smartplugs/<em>:deviceId</em>/actions</h2>
   
   <p>Creates a new action for the smartplug. If there is no existing event for this action, a new event is created</p>
   
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>action</dt>
         <dd>[mandatory] An action to do, e.g. ON, OFF</dd>

         <dt>time</dt>
         <dd>[mandatory] A time in 24-hour format the event should be fired at</dd>

         <dt>repeat</dt>
         <dd>[mandatory] A string indicating how often an event should be triggered. Valid values: days, date.</dd>

         <dt>days[]</dt>
         <dd>[optional] An array of days the event should be fired on. Valid values: days of the
            week (SUNDAY - SATURDAY) or one of the periods: ALL (every day), WEEKDAYS (Monday-Friday), WEEKENDS (Saturday, Sunday).
            See also <em>Sample requests</em> section for how to use this parameter
         </dd>

         <dt>date</dt>
         <dd>[optional] A certain date the event should be fired at. The date should be in ISO-8601 format, for example 2012-04-06</dd>
      </dl>
   </div>

   <div class="sample">
      <h3>Sample requests:</h3>

      <p class="call">/smartplugs/AD-02-03-02-03-02-03-02/actions?action=ON&amp;time=10:30&amp;repeat=days&amp;days[]=MONDAY&amp;days[]=FRIDAY</p>
      <p class="call">Creates a new ON action scheduled to repeat every week on Mondays and Fridays at 10:30</p>

      <p class="call">/smartplugs/AD-02-03-02-03-02-03-02/actions?action=ON&amp;time=20:00&amp;repeat=days&amp;days[]=WEEKDAYS</p>
      <p class="call">Creates a new ON action scheduled to repeat on weekdays at 20:00</p>

      <p class="call">/smartplugs/AD-02-03-02-03-02-03-02/actions?action=OFF&amp;time=20:00&amp;repeat=days&amp;days[]=WEEKENDS</p>
      <p class="call">Creates a new OFF action scheduled to repeat on weekends at 20:00</p>

      <p class="call">/smartplugs/AD-02-03-02-03-02-03-02/actions?action=OFF&amp;time=20:00&amp;repeat=days&amp;days[]=ALL</p>
      <p class="call">Creates a new OFF action scheduled to repeat every day at 20:00</p>

      <p class="call">/smartplugs/AD-02-03-02-03-02-03-02/actions?action=ON&amp;time=10:30&amp;repeat=date&amp;date=2012-04-06</p>
      <p class="call">Creates a new ON action which is to be fired only once on the 6th of April 2012 at 10:30</p>
   </div>
   
   <div class="sample">
      <h3>Sample response:</h3>
      <p class="json">
{
   "id" : 120,
   "action" : "ON",
   "time" : "10:30",
   "days" : [
      "MONDAY",
      "FRIDAY"
   ],
   "date" : null
}
      </p>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>500 INVALID_PARAMETER</dt>   <dd>The <em>repeat</em> parameter is invalid</dd>
         <dt>500 INTERNAL_ERROR</dt>  <dd>Either the smartplug with <em>:deviceId</em> was not found or
         the event is invalid or an error occurred while saving the action.</dd>
      </dl>
   </div>
</div>
        
<div class="section">
   <h3>PUT /smartplugs/<em>:deviceId</em>/actions/<em>:id</em></h3>
   
   <p>Updates the action with ID <em>:id</em> for smartplug <em>:deviceId</em></p>

   <div class="args">
      <h3>Arguments:</h3>
      <p>See </p>
      <p class="call">/smartplugs/<em>:deviceId</em>/actions</p>
   </div>
   
   <div class="sample">
      <h3>Sample requests:</h3>
      
      <p class="call">/smartplugs/AD-02-03-02-03-02-03-02/actions/108?action=ON&amp;time=10:30&amp;repeat=days&amp;days[]=MONDAY&amp;days[]=FRIDAY</p>
      <p class="call">Update the action with ID 108: set name to ON, repeat every week on Mondays and Fridays at 10:30</p>
   </div>
   
   <div class="sample">
      <h3>Sample response:</h3>
      <p class="header">
         204 Updating action with ID <em>:id</em>
      </p>
   </div>
   
   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>500 INVALID_PARAMETER</dt>   <dd>Either <em>repeat</em> or <em>id</em> is invalid.
         See the error message for details</dd>
         <dt>500 INTERNAL_ERROR</dt>   <dd>Either the smartplug with ID <em>:deviceId</em> was not found
         or the event is invalid or an error occurred while updating the action.</dd>
      </dl>
   </div>
</div>

<div class="section">
   <h3>DELETE /smartplugs/<em>:deviceId</em>/events/<em>:id</em></h3>
   
   <p>Removes the action with ID <em>:id</em> for smartplug with <em>:deviceId</em>.
      If the corresponding event has no more actions, it's deleted as well</p>
   
   <div class="sample">
      <h3>Sample response:</h3>
      <p class="header">
         204 Removing action with ID <em>:actionId</em>
      </p>
   </div>
   
   <div class="errors">
      <h3>Returned errors:</h3>
      
      <dl>
         <dt>500 MISSING_PARAMETER</dt>   <dd>The <em>:id</em> parameter is missing</dd>
         <dt>404 INVALID_PARAMETER</dt>   <dd>If the smartplug with <em>:deviceId</em> was not found</dd>
      </dl>
   </div>
</div>

<div class="section">
<h2>Other settings</h2>
<p>To set the icon or appliance name, use the low-level API,
or set them via the main AlertMe website.
</p>
</div>
    </div>
  </body>

<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/smartplugs by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
</html>
