<!DOCTYPE html>
<html>
  
<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/secondaryuser by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <base  />
    <link rel="stylesheet" type="text/css" href="../../css.css" />
    <title>AlertMe.com API v5 Documentation :: calls/widgets/secondaryuser :: DRAFT</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  </head>
  <body>
    <h1>
      API v5 Documentation <span>draft</span>
    </h1>
    <div class="menu">
      <ul class="menu">
   <li><h4><a href="../../../docs.html">overview</a></h4>
      <ul>
         <li><a href="../../responses.html">responses</a></li>
         <li><a href="../../errors.html">errors</a></li>
         <li><a href="../../examples.html">examples</a></li>

      </ul>
   </li>
   <li><h4>calls</h4>
      <ul>

         <li><a href="../sessions.html">sessions</a></li>

         <li><a href="../users.html">users</a>
            <ul>

               <li><a href="../users/systemalerts.html">system alerts</a></li>

               <li><a href="../questions.html">questions</a></li>

               <li><a href="../hubs.html">hubs</a>
                  <ul>
                     <li><a href="../hubs/activityLog.html">activity log (history)</a></li>
                     <li><a href="../devices.html">devices</a>
                       <ul>

                           <li><a href="../devices/events.html">events</a></li>

                        </ul>
                     </li>
                     <li><a href="../hubs/profiles.html">profiles</a></li>

                     <li>rules
                        <ul>
                           <li><a href="../rules/actions.html">actions</a></li>
                           <li><a href="../../actions.html">action types</a></li>                           
                           <li><a href="../rules/wizard.html">wizard</a></li>
                        </ul>
                     </li>
                     <li><a href="../services.html">services</a>
                        <ul>

                           <li><a href="../services/events.html">events</a></li>

                        </ul>
                     </li>

                  </ul>
               </li>

               <li><a href="../widgets.html">widgets</a>
                  <ul>
                     <li><a href="alarm.html">alarm</a></li>
                     <li><a href="care.html">care</a></li>
                     <li><a href="cameras.html">cameras</a></li>
                     <li><a href="climate.html">climate</a></li>
                     <li><a href="dashboard.html">dashboard</a></li>
                     <li><a href="heating.html">heating</a></li>
                     <li><a href="locks.html">locks</a></li>
                     <li><a href="homestatus.html">homestatus</a></li>

                     <li><a href="presence.html">presence</a></li>
                     <li><a href="smartplugs.html">smartplugs</a></li>
                     <li><a href="swingometer.html">swingometer</a></li>
                     <li><a href="temperature.html">temperature</a></li>
                     <li><a href="usage.html">usage</a></li>
                     <li><a href="petdoors.html">petdoors</a></li>
                     <li><a href="group.html">groups</a></li>
                     <li><a href="history.html">history</a></li>
                     <li><a href="irrigation.html">irrigation</a></li>
                     <li><a href="secondaryuser.html">secondaryuser</a></li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
   </li>
</ul>
    </div>
    <div class="doc calls widgets secondaryuser_page">
      <div class="section">
   <p>
      All calls listed below follow
      <span class="call">/users/<em>:userId</em>/widgets</span>
      in the URI;
      this prefix has been omitted for conciseness
   </p>
</div>


<div class="section">
   <h2>GET <span class="call">/secondary/</span></h2>
   <p>Returns secondary users of the selected user</p>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         [
         {
         "id":"13",
         "nickname":"spain",
         "userStatus":"",
         "email":"kor@gmail.com",
         "mobile":"15556667700",
         "phone":"15556667770",
         "accessLevel":"NO_ACCESS",
         "accepted":"true",
         "contactsStatus":
         {
         "EMAIL":"CONFIRMED",
         "TEXT":"CONFIRMED",
         "CALL":"CONFIRMED",
         },
         "messageGroups":
         {
         "SYSTEM":"SYSTEM",
         "INTRUDER":"INTRUDER",
         "SAFETY":"SAFETY",
         },
         "cameras":["cameraId"],
         }
         ]
      </p>
      <p>Returns secondary users of the selected user and account holder if you will call it with param "includeAccountHolder=true"</p>

      <div class="sample">
         <h3>Sample Response:</h3>
         <p class="json">
            [
            {
            "id":"-1",
            "nickname":"am_datestsgg am_datestff",
            "userStatus":"",
            "email":"kor@gmail.com",
            "mobile":"15556667700",
            "phone":"15556667770",
            "accessLevel":"FULL_ACCESS",
            "accepted":"true",
            "contactsStatus":
            {
            "EMAIL":"CONFIRMED",
            "TEXT":"CONFIRMED",
            "CALL":"CONFIRMED",
            },
            "messageGroups":
            {
            "0":"SYSTEM",
            "1":"INTRUDER",
            "2":"SAFETY",
            }
            }
            ]
         </p>
      </div>

      <div class="errors">
         <h3>Returned errors:</h3>
         <dl>
            <dt>404 NO_SECONDARY_USERS</dt>
            <dd>
               User has no secondary users
            </dd>
         </dl>
      </div>

   </div>
</div>

<div class="section">
   <h2>GET <span class="call">/secondary/<em>:secondary</em></span></h2>
   <p>Returns secondary user details of the selected user and secondary id</p>
   <div class="args">
      <h3>Argument:</h3>
      <dl>
         <dt>secondary</dt> <dd>The secondary id of contact</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
         "id": "18",
         "nickname": "johnny",
         "userStatus": "ACCEPTED",
         "email": "johnny@gmail.com",
         "mobile": "15556667700",
         "phone": "15556667700",
         "accessLevel": "READ_WRITE",
         "accepted": true,
         "contactsStatus": {
         "EMAIL": "CONFIRMED",
         "TEXT": "CONFIRMED",
         "CALL": "CONFIRMED"
         },
         "messageGroups":
         {
         "SYSTEM":"SYSTEM",
         "INTRUDER":"INTRUDER",
         "SAFETY":"SAFETY",
         },,
         "username": "johnny1969",
         "firstName": "John",
         "lastName": "Johnson"
         }
      </p>

      <div class="errors">
         <h3>Returned errors:</h3>
         <dl>
            <dt>404 INVALID_PARAMETER</dt>
            <dd>
               Invalid secondary user id
            </dd>
         </dl>
         <dl>
            <dt>404 SECONDARY_USER_ACCESS_ERROR</dt>
            <dd>
               User has no secondary user with current id
            </dd>
         </dl>
      </div>

   </div>
</div>

<div class="section">
   <h2>POST <span class="call">/secondary/<em>:secondary</em>/message/<em>:type</em></span></h2>
   <p>Send message and returns activity log id of message for secondary user</p>
   <div class="args">
      <h3>Argument:</h3>
      <dl>
         <dt>secondary</dt> <dd>The secondary id of contact</dd>
         <dt>type</dt> <dd>Type of message. Possible values is 'email', 'mobile', 'phone'</dd>
      </dl>
   </div>
   <p class="note">NOTE: Now this call works only with test messages and require param "?test=true".</p>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
         "logId": "118"
         }
      </p>
      <p>Send test message to secondary user of the selected account holder if you will call it with param "?test=true"</p>

      <div class="errors">
         <h3>Returned errors:</h3>

         <dl>
            <dt>404 SUPPORT_ONLY_TEST_MESSAGES</dt>
            <dd>
               Support only test messages
            </dd>
         </dl>
         <dl>
            <dt>404 NOT_CORRECT_TYPE_OF_MESSAGE</dt>
            <dd>
               Not correct type of message
            </dd>
         </dl>
         <dl>
            <dt>404 EMPTY_DATA_IN_MESSAGE</dt>
            <dd>
               Empty data in message
            </dd>
         </dl>
      </div>
   </div>
</div>

<div class="section">
   <h2>GET <span class="call">/secondary/<em>:secondary</em>/history/</span></h2>
   <p>Returns secondary user messages history of the secondary user or all selected user contacts</p>

   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>secondary</dt> <dd>The secondary id of contact. Possible values is 'all', -1(if we need only current user history), integer value</dd>
         <dt>start</dt> <dd>The timestamp of start period</dd>
         <dt>page</dt> <dd>Number of page</dd>
         <dt>pageSize</dt> <dd>Size of page min=1, max=100, default=50</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
            "entries":{
               "500":{
               "id":"500",
               "hubId":"0",
               "userId":"3034",
               "to":"15556667700",
               "type":"ivr",
               "response":"This is Iris from Lowes. This is a test message Myname Lastname's account",
               "date":"2013-12-26 14:51:29",
               "secondaryId":"24",
               "nickname":"johnny"
               },
               "499":{
               "id":"499",
               "hubId":"2029717200360701955",
               "userId":"3034",
               "to":"johnny@gmail.com",
               "type":"email",
               "response":"IRIS FROM LOWE'S - TEST MESSAGE IRIS FROM LOWE'S - TEST MESSAGE.This is a test message from Iris Myname Lastname's Iris account.",
               "date":"2013-12-26 14:51:01",
               "secondaryId":"24",
               "nickname":"johnny"
               },
            },
            "numEntriesAvailable":14
         }
      </p>
      <p>Returns response if you will call it with params like "start=1385856000&page=1&pageSize=100"</p>

      <div class="errors">
         <h3>Returned errors:</h3>
         <dl>
            <dt>404 INVALID_PARAMETER</dt>
            <dd>
               Invalid start, page or pageSize
            </dd>
         </dl>
      </div>

   </div>
</div>
getMessageDetailsAction
<div class="section">
   <h2>GET <span class="call">/secondary/<em>:secondary</em>/history/<em>:message</em></span></h2>
   <p>Returns secondary user message history details of the secondary user or all selected user contacts</p>

   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>secondary</dt> <dd>The secondary id of contact. Possible values is -1(if we need only current user history), integer value</dd>
         <dt>message</dt> <dd>Message id from response log</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
            "id":"368",
            "to":"johnny@gmail.com",
            "type":"sms",
            "response":"This is Iris from Lowes. This is a test message Myname Lastname's account",
            "date":"2013-12-10 08:48:37",
            "secondaryId":"24",
            "nickname":"johnny",
            "sentTo":"mobile"
         }
      </p>
      <div class="errors">
         <h3>Returned errors:</h3>
         <dl>
            <dt>404 INVALID_PARAMETER</dt>
            <dd>
               Invalid secondary argument
            </dd>
            <dt>404 SECONDARY_USER_ACCESS_ERROR</dt>
            <dd>
               User has no secondary user with current id
            </dd>
            <dt>404 INVALID_CONTACT_ID_OR_MESSAGE_ID</dt>
            <dd>
               Argument secondary not related to message
            </dd>
         </dl>
      </div>

   </div>
</div>    </div>
  </body>

<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/widgets/secondaryuser by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:16 GMT -->
</html>
