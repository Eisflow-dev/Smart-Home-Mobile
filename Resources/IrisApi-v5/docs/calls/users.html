<!DOCTYPE html>
<html>
  
<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/users by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <base  />
    <link rel="stylesheet" type="text/css" href="../css.css" />
    <title>AlertMe.com API v5 Documentation :: calls/users :: DRAFT</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
  </head>
  <body>
    <h1>
      API v5 Documentation <span>draft</span>
    </h1>
    <div class="menu">
      <ul class="menu">
   <li><h4><a href="../../docs.html">overview</a></h4>
      <ul>
         <li><a href="../responses.html">responses</a></li>
         <li><a href="../errors.html">errors</a></li>
         <li><a href="../examples.html">examples</a></li>

      </ul>
   </li>
   <li><h4>calls</h4>
      <ul>

         <li><a href="sessions.html">sessions</a></li>

         <li><a href="users.html">users</a>
            <ul>

               <li><a href="users/systemalerts.html">system alerts</a></li>

               <li><a href="questions.html">questions</a></li>

               <li><a href="hubs.html">hubs</a>
                  <ul>
                     <li><a href="hubs/activityLog.html">activity log (history)</a></li>
                     <li><a href="devices.html">devices</a>
                       <ul>

                           <li><a href="devices/events.html">events</a></li>

                        </ul>
                     </li>
                     <li><a href="hubs/profiles.html">profiles</a></li>

                     <li>rules
                        <ul>
                           <li><a href="rules/actions.html">actions</a></li>
                           <li><a href="../actions.html">action types</a></li>                           
                           <li><a href="rules/wizard.html">wizard</a></li>
                        </ul>
                     </li>
                     <li><a href="services.html">services</a>
                        <ul>

                           <li><a href="services/events.html">events</a></li>

                        </ul>
                     </li>

                  </ul>
               </li>

               <li><a href="widgets.html">widgets</a>
                  <ul>
                     <li><a href="widgets/alarm.html">alarm</a></li>
                     <li><a href="widgets/care.html">care</a></li>
                     <li><a href="widgets/cameras.html">cameras</a></li>
                     <li><a href="widgets/climate.html">climate</a></li>
                     <li><a href="widgets/dashboard.html">dashboard</a></li>
                     <li><a href="widgets/heating.html">heating</a></li>
                     <li><a href="widgets/locks.html">locks</a></li>
                     <li><a href="widgets/homestatus.html">homestatus</a></li>

                     <li><a href="widgets/presence.html">presence</a></li>
                     <li><a href="widgets/smartplugs.html">smartplugs</a></li>
                     <li><a href="widgets/swingometer.html">swingometer</a></li>
                     <li><a href="widgets/temperature.html">temperature</a></li>
                     <li><a href="widgets/usage.html">usage</a></li>
                     <li><a href="widgets/petdoors.html">petdoors</a></li>
                     <li><a href="widgets/group.html">groups</a></li>
                     <li><a href="widgets/history.html">history</a></li>
                     <li><a href="widgets/irrigation.html">irrigation</a></li>
                     <li><a href="widgets/secondaryuser.html">secondaryuser</a></li>
                  </ul>
               </li>
            </ul>
         </li>
      </ul>
   </li>
</ul>
    </div>
    <div class="doc calls users_page">
      <div class="section">
 <h2>GET <span class="call">/users/<em>:username</em></span></h2>
 <p>Returns information about the user identified by <span class="var">:username.</span></p>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
    "username":            "JeffJefferson",
    "enabled":             true,
    "webVersion":          2,
    "regDate":             "2012-02-13 14:42:38",
    "firstName":           "Jeff",
    "lastName":            "Jefferson",
    "pin":                 "1234",
    "energyPrice":         "0.10",
    "address":             "00 Street",
    "city":                "Cambridge",
    "county":              "Cambridgeshire",
    "postcode":            "CB5 8DZ",
    "country":             "UK",
    "memorable":           "1",
    "memorable_question":  "MOTHERNAME",
    "answer":              "MyAnswer",
    "status":              3,
    "installStep":         "intro",
    "skin":                "default",
    "userLevel":           "customer",
    "access":              "",
    "settings":            "",
    "dob":                 "",
    "imageId":             -1,
    "email":               "alertme@example.com",
    "mobile":              "0845 200 2874",
    "phone":               "01223 222150",
    "language":            "en",
    "timezone":            0,
    "daylightSaving":      "EU",
    "dateFormat":          "d-m-Y",
    "timeFormat":          "H:i",
    "temperatureFormat":   "C",
    "weatherQueryType":    "postcode",
    "defaultCity":         "London",
    "defaultCountry":      "UK",
    "currency":            "GBP",
    "swingometerShare":    false,
    "hasSmartMeters":      false,
    "availableCurrencies": ["GBP", "USD", "EUR", "CAD"],
    "availableLanguages":  ["en", "fi"],
    "partnerSpecificId":   "JeffJefferson",
    "userConfigSource":    "DEFAULT",
    "hasEnergyDevices":    false,
    "partnerId":           1
}
  </p>
 </div>
 <p class="note">
   NOTE: access is restricted to users' information.  The currently logged in user must have sufficient privileges to see this information.
 </p>
</div>

<div class="section">
 <h2>DELETE <span class="call">/users/<em>:username</em></span></h2>
 <p>Delete a user.</p>
 <p class="note">
   NOTE: access is restricted to users' information.  The currently logged in user must have sufficient privileges to modify this information.
 </p>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>403 NOT_PERMITTED</dt>
      <dd>Returned if the user making the call is not a 'partner'.</dd>
   </dl>
   <dl>
      <dt>403 NO_SUCH_USER</dt>
      <dd>Returned if the user did not exist.</dd>
   </dl>
   <dl>
      <dt>400 USER_HAS_HUB</dt>
      <dd>The user cannot be deleted, because they have a hub (see DELETE /users/ for options to override)</dd>
   </dl>
 </div>
</div>

<div class="section">
 <h2>GET <span class="call">/users/all/search</span></h2>
 <p>Returns information about users that match the provided query argument sorted by username.</p>
 <div class="args">
  <h3>Argument:</h3>
  <dl>
   <dt>query</dt> <dd>Term to search by (matches against beginnings of username, email address; also matches against mobile number, partnerSpecificId or hub ID).</dd>
   <dt>first</dt> <dd>(optional) Restrict the results returned, to those starting at the specified index (1 based)</dd>
   <dt>quantity</dt> <dd>(optional) Restrict the results to the maximum quantity specified</dd>
   <dt>fieldSet</dt> <dd>(optional) Specify which set(s) of fields to return.  Options are ("default", "user", and "hub").  Format is space separated or plus ('+') when URL encoded</dd>
  </dl>
 </div>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
   "totalMatches":2,
   "matches":
      [
         {
            "userId":"1234",
            "username":"jsmith",
            "firstName":"John",
            "lastName":"Smith",
            "postcode":"SW1A 1AA",
            "partnerSpecificId":"",
            "phone":null,
            "email":"support@alertme.com",
            "hubs":
               [
                  {
                     "shortId":"ABC-123"
                  }
               ]
         },
         {
            "userId":"1235",
            "username":"jsmith2",
            "firstName":"Jane",
            "lastName":"Smith",
            "postcode":"SW1A 2AA",
            "partnerSpecificId":"",
            "phone":null,
            "email":"sales@alertme.com",
            "hubs":
               [
                  {
                     "shortId":"ABC-124"
                  }
               ]
         }
      ]
}
  </p>
 </div>
 <p class="note">
   NOTE: totalMatches indicates the total number that would be returned, if no first/quantity limit were applied.
 </p>
</div>


<div class="section">
 <h2>POST <span class="call">/users</span></h2>
 <p>Create a new user </p>
 <div class="args">
  <h3>Arguments:</h3>
  <dl>
   <dt>username</dt>  <dd>(mandatory) if omitted, the email address will be used instead.</dd>
   <dt>password</dt>  <dd>(mandatory) password.</dd>
   <dt>firstName</dt> <dd>First name.</dd>
   <dt>lastName</dt>  <dd>Surname.</dd>
   <dt>address</dt>   <dd>Street address.</dd>
   <dt>pin</dt>       <dd>4 or 6 digit PIN (depending on tariff's pin length configuration).</dd>
   <dt>city</dt>      <dd>City.</dd>
   <dt>county</dt>    <dd>County/State/Province.</dd>
   <dt>postcode</dt>  <dd>Postal Code.</dd>
   <dt>country</dt>   <dd>Country.</dd>
   <dt>dob</dt>       <dd>Date of birth (DD-MM-YY).</dd>
   <dt>language</dt>  <dd>UI Language.</dd>
   <dt>phone</dt>     <dd>Landline phone number.</dd>
   <dt>email</dt>     <dd>Email address.</dd>
   <dt>mobile</dt>    <dd>Mobile phone number.</dd>
   <dt>tariff</dt>    <dd>Tariff name.</dd>
   <dt>partnerId</dt> <dd>Partner ID (mandatory only for a supertoken user).</dd>
   <dt>partnerSpecificId</dt> <dd>External userId.</dd>
   <dt>flags[flagName]</dt>     <dd>Sets a flag for the user.  Permitted values are false|true and 0|1 - other values will be treated as false  (This argument can be specified zero or more times, e.g. to set zero or more flags - see below for a list of available flags).</dd>
  </dl>
 </div>
 <p class="note">
   NOTE: access is restricted to users' information.  The currently logged in user must have sufficient privileges to post this information.
 </p>
 <p class="note">
   NOTE: all fields must pass validation in order that any updates to occur.
 </p>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 INVALID_PARAMETERS</dt>
      <dd>The argument name is not valid. Ensure that you have not supplied an argument not in the list above.</dd>
   </dl>
   <dl>
      <dt>400 INVALID_VALUE</dt>
      <dd>The value supplied in a field has failed to pass the validation test for that field.</dd>
   </dl>
   <dl>
      <dt>400 INVALID_FLAG</dt>
      <dd>The flag supplied is not recognised.</dd>
   </dl>
   <dl>
      <dt>400 PARAMETER_ALREADY_TAKEN</dt>
      <dd>A value has already been set for the specified parameter.</dd>
   </dl>
   <dl>
      <dt>403 NOT_PERMITTED</dt>
      <dd>Returned if the user making the call is not a 'partner'.</dd>
  </dl>
   <dl><dt>500 FAILED_TO_SAVE_VALUE</dt>
   <dd>The value couldn't be saved due to an internal error.</dd>
   </dl>
 </div>
</div>

<div class="section">
 <h2>DELETE <span class="call">/users</span></h2>
 <p>Delete a user.</p>
 <div class="args">
  <h3>Arguments:</h3>
  <dl>
   <dt>username</dt>            <dd>The username of the user to delete.</dd>
   <dt>ignoreExistingHubs</dt>  <dd>"true" to delete the user even if they have a hub (not recommended, this will "orphan" the hub).</dd>
   <dt>factoryRestoreHubs</dt>  <dd>"true" to factory restore the user's hub(s) and connected devices, if they have any.</dd>
  </dl>
 </div>
 <p class="note">
   NOTE: access is restricted to users' information.  The currently logged in user must have sufficient privileges to modify this information.
 </p>
 <p class="note">
   NOTE: A hub (and its devices) will only be factory-restored, if they are online and contactable.
 </p>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 INVALID_PARAMETERS</dt>
      <dd>The argument name is not valid. Ensure that you have not supplied an argument not in the list above.</dd>
   </dl>
   <dl>
      <dt>403 NOT_PERMITTED</dt>
      <dd>Returned if the user making the call is not a 'partner'.</dd>
  </dl>
   <dl>
      <dt>403 NO_SUCH_USER</dt>
      <dd>Returned if the user did not exist.</dd>
   </dl>
   <dl>
      <dt>400 USER_HAS_HUB</dt>
      <dd>Returned if the user already has a hub (n/a if either ignoreExistingHubs, or factoryRestoreHubs is set).</dd>
   </dl>
 </div>
</div>

<div class="section">
    <h2>GET <span class="call">/users/<em>:username/settings</em></span></h2>
    <p>Returns user details. Alias for GET <span class="call">/users/<em>:username</em></span></p>
</div>

<div class="section">
 <h2>GET <span class="call">/users/<em>:username</em>/settings/<em>:setting</em></span></h2>
 <p>Returns a specific piece of information about the user.</p>
 <p>
   <span class="var">:setting</span> can be any one of:
   "username", "address", "pin", "city", "county", "postcode", "country", "answer", "dob", "currency",
   "language", "temperatureFormat", "partnerSpecificId", "installStep", "phone", "email", or "mobile".
 </p>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{"value": "Jeff"}
  </p>
 </div>
 <p class="note">
   Note this call always returns the value in a field named "value".  The caller will have to determine which field
   it corresponds to, based on the request.
 </p>

  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 INVALID_SETTING</dt>
      <dd>
         The argument name is not valid. Ensure that you have not supplied an argument not in the list above.
      </dd>
   </dl>
 </div>


</div>



<div class="section">
 <h2>POST <span class="call">/users/<em>:username/settings</em></span></h2>
 <p>Updates user details.</p>
 <div class="args">
  <h3>Arguments (any 1 or more):</h3>
  <dl>
   <dt>username</dt>          <dd>Username</dd>
   <dt>firstname</dt>         <dd>First name.</dd>
   <dt>lastname</dt>          <dd>Surname.</dd>
   <dt>password</dt>          <dd>New password (must also supply password_2, and old_password</dd>
   <dt>password_2</dt>         <dd>New password (must match password)</dd>
   <dt>old_password</dt>      <dd>Original password (must match the current password)</dd>
   <dt>address</dt>           <dd>Street address.</dd>
   <dt>newPin</dt>            <dd>4 or 6 digit PIN (depends on tariff pin length configuration option).</dd>
   <dt>confirmPin</dt>         <dd>New PIN (must match newPin)</dd>
   <dt>city</dt>              <dd>City.</dd>
   <dt>county</dt>            <dd>County/State/Province.</dd>
   <dt>postcode</dt>          <dd>Postal Code.</dd>
   <dt>country</dt>           <dd>Country.</dd>
   <dt>answer</dt>            <dd>Answer to security question.</dd>
   <dt>dob</dt>               <dd>Date of birth. <!--  TODO: What format allowed? --></dd>
   <dt>currency</dt>          <dd>Currency for billing (if applicable).</dd>
   <dt>language</dt>          <dd>UI Language.</dd>
   <dt>phone</dt>             <dd>Landline phone number.</dd>
   <dt>email</dt>             <dd>Email address.</dd>
   <dt>mobile</dt>            <dd>Mobile phone number.</dd>
   <dt>partnerSpecificId</dt> <dd>External userId.</dd>
   <!-- TODO: need to test these are actually accepted without error -->
   <dt>energyPrice</dt>       <dd>Cost per kWh, in local currency</dd>
   <dt>timeFormat</dt>        <dd>Sets the time format displayed*</dd>
   <dt>dateFormat</dt>        <dd>Sets the date format displayed*<!--  TODO: Appears to be unused in the code --></dd>
   <dt>daylightSaving</dt>    <dd>[Obsolete, has no effect]</dd>
   <dt>timezone</dt>          <dd>[Obsolete, has no effect]</dd>
   <dt>imageId</dt>           <dd>Use of user images is deprecated, and has no effect in the modern dashboard</dd>
   <dt>installStep</dt>       <dd>User's install step</dd>
   <!--<dt>webVersion</dt>        <dd>-</dd> TODO: Users shouldn't be able to set this, and it may be removed in the near future as it doesn't affect ZF - see WEB-4357-->
   <dt>memorable</dt>         <dd>Specifies the question which may be used to verify identity.  Specified as a single digit, which maps as:-<br />
      <table>
         <tr>
            <td>1</td>
            <td>Mother's maiden name</td>
         </tr>
         <tr>
            <td>2</td>
            <td>First pet's name</td>
         </tr>
         <tr>
            <td>3</td>
            <td>Place of birth</td>
         </tr>
         <tr>
            <td>4</td>
            <td>Name of first school</td>
         </tr>
         <tr>
            <td>5</td>
            <td>Father's middle name</td>
         </tr>
         <tr>
            <td>6</td>
            <td>Mother's middle name</td>
         </tr>
         <tr>
            <td>7</td>
            <td>Father's place of birth</td>
         </tr>
         <tr>
            <td>8</td>
            <td>Mother's place of birth</td>
         </tr>
      </table>
      </dd>
  </dl>
 </div>
 <p class="note">
   NOTE: access is restricted to users' information.  The currently logged in user must have sufficient privileges to see this information.<br />
   * date/time format specification is defined at <a href="http://www.php.net/manual/en/function.date.php">http://www.php.net/manual/en/function.date.php</a>
 </p>
 <p class="note">
   NOTE: all fields must pass validation in order that any updates to occur.
 </p>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 INVALID_SETTING</dt>
      <dd>The argument name is not valid. Ensure that you have not supplied an argument not in the list above.</dd>
   </dl>
   <dl>
      <dt>400 INVALID_VALUE</dt>
      <dd>The value supplied in a field has failed to pass the validation test for that field.</dd>
   </dl>
   <dl><dt>500 FAILED_TO_SAVE_VALUE</dt>
   <dd>The value couldn't be saved due to an internal error.</dd>
   </dl>
 </div>
</div>


<div class="section">
 <h2>POST <span class="call">/users/<em>:username</em>/settings/<em>:setting</em></span></h2>
 <p>Sets a specific piece of information about the user.</p>
 <div class="args">
  <h3>Argument:</h3>
  <dl>
   <dt>setting</dt> <dd>The value corresponding to <span class="var">:setting</span>.</dd>
  </dl>
 </div>
 <p class="note">Note: only partners can change the username.</p>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 INVALID_SETTING</dt>
      <dd>
         The argument name is not valid. Ensure that you have not supplied an argument not in the list above.
      </dd>
   </dl>
   <dl>
      <dt>400 INVALID_VALUE</dt>
      <dd>
         The value supplied in a field has failed to pass the validation test for that field.
      </dd>
   </dl>
   <dl>
      <dt>403 NOT_PERMITTED</dt>
      <dd>Returned if the user making the call is not a 'partner'.</dd>
  </dl>
   <dl>
      <dt>500 FAILED_TO_SAVE_VALUE</dt>
      <dd>The value couldn't be saved due to internal error.</dd>
   </dl>
 </div>
</div>

<div class="section">
 <h2>GET <span class="call">/users/<em>:username</em>/subscription</span></h2>
 <p>Returns the identity of the tariff to which the user is subscribed, the tariffs TRAP settings, 
   available widgets and whether it's a premium tariff or not</p>
<div class="args">
  <h3>Argument:</h3>
  <dl>
   <dt>platform</dt> <dd>optional, name of platform to check on (e.g. web3, iphone, android)</dd>
  </dl>
 </div> 
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
    "id":               1,
    "name":             "Standard Tariff",
    "installerHubType": "classic",
    "skin":             "default",
    "webUiVersion":     3,
    "androidAppLink":   "",
    "iPhoneAppLink":    "",
    "technicalSupportNumber": "",
    "technicalSupportEmail": "",
    "UIHelpLink": "http:\/\/support.alertme.com\/ics\/support\/default.asp",
    "smsGatewayNumber": "1234567890",
    "maxContacts":      3,
    "trap": {
       "web3" : [
         "CAMERAS",
         "PRESENCE",
         "TEMPERATURE",
         "USAGE_ENERGY",
         "USAGE_COST",
         "CLIMATE",
         "CONTROLS"
       ]
    },
    "widgets": [
      "CAMERAS",
      "PRESENCE",
      "TEMPERATURE",
      "USAGE_ENERGY",
      "USAGE_COST",
      "CLIMATE",
      "CONTROLS"
    ],
    "premiumTariff": true
}
  </p>
 </div>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>404 NO_SUCH_USER</dt>
      <dd>
        There is no user with the specified username.
      </dd>
   </dl>
 </div>
</div>

<div class="section">
   <h2>GET <span class="call">/users/<em>:username</em>/subscription/active</span></h2>
   <p>Returns whether the specified user and their hub are enabled for use in our system.</p>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
   "value"  : true
}
      </p>
   </div>
   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>404 NO_SUCH_USER</dt>
         <dd>
            There is no user with the specified username.
         </dd>
      </dl>
   </div>
</div>

<div class="section">
   <h2>PUT <span class="call">/users/<em>:username</em>/subscription/active</span></h2>
   <p>Activates/deactivates the user and their hub.</p>
   <div class="args">
      <h3>Argument:</h3>
      <dl>
         <dt>active</dt> <dd>"TRUE" to enable the user, "FALSE" to disable the user</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Response:</h3>
      <p class="header">HTTP 204 </p>
   </div>
   <p class="note">This can only be called using the partner/supertoken</p>
</div>

<div class="section">
 <h2>GET <span class="call">/users/<em>:username</em>/subscription/widgets</span></h2>
 <p>Returns an array of the widgets which the user should see.</p>
 <div class="args">
  <h3>Argument:</h3>
  <dl>
   <dt>platform</dt> <dd>(mandatory) Identifies the platform for which widgets should be returned.</dd>
  </dl>
 </div>
 <div class="sample">
    <h3>Sample Request:</h3>
    <p>GET <span class="call">/users/<em>:username</em>/subscription/widgets?<em>platform=web3</em></span></p>
 </div>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
[
   "ALARM", "TEMPERATURE", "HEATING", "POWER_NOW"
]
  </p>
 </div>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>404 NO_SUCH_PLATFORM</dt>
      <dd>
        The <em>platform</em> parameter must be present and specify the name of a valid platform

      </dd>
   </dl>
   <dl>
      <dt>404 NO_SUCH_USER</dt>
      <dd>
        There is no user with the specified username.
      </dd>
   </dl>
 </div>
</div>

<div class="section">
 <h2>GET <span class="call">/users/<em>:username</em>/subscription/widgets/status</span></h2>
 <p>Returns an array of the widgets which the user should see with statuses.</p>
 <div class="args">
  <h3>Argument:</h3>
  <dl>
   <dt>platform</dt> <dd>(mandatory) Identifies the platform for which widgets should be returned.</dd>
  </dl>
 </div>
 <div class="sample">
    <h3>Sample Request:</h3>
    <p>GET <span class="call">/users/<em>:username</em>/subscription/widgets/status?<em>platform=web3</em></span></p>
 </div>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
   {
      "LOCKS":{"status":"OK", "visible":true},
      "ALARM":{"status":"NO_DATA", "visible":true},
      "TIME_OF_USE":{"status":"NOT_AVAILABLE", "visible":false},
      "CONTROL":{"status":"NO_DEVICE", "visible":true}
   }
  </p>
 </div>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>404 NO_SUCH_PLATFORM</dt>
      <dd>
        The <em>platform</em> parameter must be present and specify the name of a valid platform

      </dd>
   </dl>
   <dl>
      <dt>404 NO_SUCH_USER</dt>
      <dd>
        There is no user with the specified username.
      </dd>
   </dl>
 </div>
</div>

   
<div class="section">
   <h2>GET <span class="call">/users/<em>:username</em>/subscription/trap</span></h2>
   <p>Returns an array of the available features for the chosen platforms.</p>
   <div class="args">
      <h3>Argument:</h3>
      <dl>
         <dt>platform</dt> <dd>(not required) Identifies the platform for which features should be returned. If not passed features for all platforms will be returned.</dd>
         <dt>feature</dt> <dd>(not required) Identifies the feature that should be returned if available. If not passed all available features will be returned.</dd>
      </dl>
   </div>
   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
{
   "web3"  : ["PRESENCE"],
   "iphone": ["PRESENCE"]
}
      </p>
   </div>
   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>404 NO_SUCH_PLATFORM</dt>
         <dd>
            The <em>platform</em> parameter must be present and specify the name of a valid platform

         </dd>
      </dl>
      <dl>
         <dt>404 NO_SUCH_USER</dt>
         <dd>
            There is no user with the specified username.
         </dd>
      </dl>
   </div>
</div>

   
<div class="section">
 <h2><a id="availabledevices">GET <span class="call">/users/<em>:username</em>/subscription/availabledevices</span></a></h2>
 <p>Returns an array of devices which are expected to be available to a user on their tariff; that is those
 supplied in their orignal box at time of purchase, and/or optional extra devices they might buy.</p>
 <div class="args">
  <h3>Argument:</h3>
  <dl> 
   <dt>availability</dt> <dd>(optional) &quot;boxed&quot; -&gt; devices supplied in the box, &quot;optional&quot; -&gt; optional extra devices, &quot;all&quot; (default) all devices available</dd>
  </dl>
 </div>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
[
   "DEVICE_BUTTON", "DEVICE_KEYFOB", "DEVICE_SMOKEDETECTOR", "DEVICE_POWERCLAMP"
]
  </p>
 </div>
  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>404 INVALID_TYPE</dt>
      <dd>
        The <em>type</em> parameter must be "boxed", "optional", or "all"
      </dd>
   </dl>
   <dl>
      <dt>404 NO_SUCH_USER</dt>
      <dd>
        There is no user with the specified username.
      </dd>
   </dl>
 </div>
</div>




<div class="section">
 <h2>GET <span class="call">/users/<em>:username</em>/weather</span></h2>
 <p>Returns weather information at location specified by user address data.</p>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
   "code": 266,
   "date": 1336473757,
   "cloudiness": 100,
   "description": "Light drizzle",
   "humidity": 78,
   "icon": "day_cloudy_with_light_rain",
   "max": 15.555555555556,
   "min": 6.6666666666667,
   "precipitation": 1.3,
   "pressure": 1007,
   "temperature": 12.78,
   "temperatureUnit": "C",
   "time_of_day": "Morning",
   "forecast_24_hours": 
      [
         {
            "code":"353",
            "description":"Light rain shower",
            "icon":"day_light_rain_showers",
            "date":1336488157,
            "time_of_day":"Afternoon",
            "temperature":15.56
         },
         {
            "code":"176",
            "description":"Patchy rain",
            "icon":"night_light_rain_showers",
            "date":1336509757,
            "time_of_day":"Evening",
            "temperature":10
         },
         {
            "code":"263",
            "description":"Patchy light drizzle",
            "icon":"night_light_rain_showers",
            "date":1336531357,
            "time_of_day":"Night",
            "temperature":6.67
         },
         {
            "code":"296",
            "description":"Light rain",
            "icon":"day_cloudy_with_light_rain",
            "date":1336552957,
            "time_of_day":"Morning",
            "temperature":7.78
         }
      ],
   "forecast_7_days":
      [
         {
            "code":"266",
            "description":"Light drizzle",
            "icon":"day_cloudy_with_light_rain",
            "date":1336561200,
            "temperature":13.33
         },
         {
            "code":"302",
            "description":"Moderate rain",
            "icon":"day_cloudy_with_heavy_rain",
            "date":1336647600,
            "temperature":10.56
         },
         {
            "code":"113",
            "description":"Sunny",
            "icon":"day_sunny",
            "date":1336734000,
            "temperature":12.78
         },
         {
            "code":"116",
            "description":"Partly Cloudy",
            "icon":"day_sunny_intervals",
            "date":1336820400,
            "temperature":13.33
         },
         {
            "code":"119",
            "description":"Cloudy",
            "icon":"day_white_cloud",
            "date":1336906800,
            "temperature":13.33
         },
         {
            "code":"122",
            "description":"Overcast",
            "icon":"day_black_low_cloud",
            "date":1336993200,
            "temperature":14.44
         },
         {
            "code":"176",
            "description":"Patchy rain",
            "icon":"day_light_rain_showers",
            "date":1337079600,
            "temperature":12.78
         }
      ]
}
  </p>
 </div>

 <p class="note">
   Cloudiness and humidity are returned as percentage, precipitation in mm, pressure in hPa,
   and temperature in &deg;C.
 </p>

  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 INVALID_LOCATION</dt>
      <dd>
         User's location not set or not available. The weather information cannot be determined.
      </dd>
   </dl>
 </div>

</div>

<div class="section">
 <h2>GET <span class="call">/users/all/usernameAvailable</span></h2>
 <p>Returns true if the specified username is available for registration.</p>
 
 <div class="args">
  <h3>Argument:</h3>
  <dl> 
   <dt>username</dt> <dd>Username to check</dd>
  </dl>
 </div>
 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
{
   "available": true
}
  </p>
 </div>

  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>400 MISSING_PARAMETER</dt>
      <dd>
         <em>username</em> wasn't specified.
      </dd>
   </dl>
 </div>

</div>

 <div class="section">
 <h2>GET <span class="call">/users/<em>:username</em>/primary</span></h2>
 <p>Returns primary users of the selected user. If you are logged in as secondary user this call returns primary users of your real user.</p>

 <div class="sample">
  <h3>Sample Response:</h3>
  <p class="json">
   [
    {
     "id": "1",
     "userName": "testuser0",
     "firstName": "John",
     "lastName": "Smith",
     "hubIds": ["2029717219587391489"],
     "hubNames": ["One hub"]
    }
  ]
  </p>
 </div>

  <div class="errors">
   <h3>Returned errors:</h3>
   <dl>
      <dt>404 NO_PRIMARY_USERS</dt>
      <dd>
         User has no primary users
      </dd>
   </dl>
 </div>

</div>

<div class="section">
   <h2>PUT <span class="call">/users/<em>:username</em>/confirmTandc</span></h2>
   <p>Confirm terms and condition</p>

   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>version</dt>  <dd>Version of terms and conditions. If omitted, the version is equal to the latest available terms and conditions version</dd>
      </dl>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>400 INVALID_PARAMETER</dt>
         <dd>

         </dd>
      </dl>
   </div>

   <div class="sample">
      <h3>Response:</h3>
      <p class="header">HTTP 204 </p>
   </div>

</div>

<div class="section">
   <h2>GET <span class="call">/users/<em>:username</em>/termsstate</span></h2>
   <p>Returns current state of terms and conditions</p>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
         "latestVersion":"1.5",
         "latestAcceptedVersion":"1.5",
         "latestText":null,
         "shouldShow":false
         }
      </p>
   </div>
   <p class="note">
      NOTE: latestText will be null if latestVersion = latestAcceptedVersion
   </p>
   <p class="note">NOTE: shouldShow determine whatever terms and conditions should be displayed immediately or can wait. For example if alarm is sounding.</p>

</div>

<div class="section">
   <h2>POST <span class="call">/users/<em>:username</em>/sendterms</span></h2>
   <p>Send terms and condition to the user via email</p>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
         "email":"email@example.com"
         }
      </p>
   </div>
   <div class="args">
      <h3>Arguments:</h3>
      <dl>
         <dt>version</dt>  <dd>Version of terms and conditions. If ommited version = latest available terms and conditions version</dd>
      </dl>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>400 INVALID_PARAMETER</dt>
         <dd>

         </dd>
      </dl>
   </div>

   <p class="note">
      NOTE: latestText will be null if latestVersion = latestAcceptedVersion
   </p>
   <p class="note">NOTE: shouldShow determine whatever terms and conditions should be displayed immediately or can wait. For example if alarm is sounding.</p>

</div>

<div class="section">
   <h2>GET <span class="call">/users/<em>:username</em>/monthlyStatement</span></h2>
   <p>Returns monthly statements sent to customer in last 3 months</p>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
         "data": [
              {
                "id": 3020,
                "sentTimestamp": 1360761322,
                "subject": "Your monthly system status check for Test's Home"
              },
              ...
          ]
         }
      </p>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>404 NO_REPORTS_SENT</dt>
         <dd>

         </dd>
      </dl>
   </div>

</div>

<div class="section">
   <h2>GET <span class="call">/users/<em>:username</em>/monthlyStatement/<em>:statementId</em></span></h2>
   <p>Returns requested monthly statement sent</p>

   <div class="sample">
      <h3>Sample Response:</h3>
      <p class="json">
         {
         "data": {
            "id": 3020,
            "sentTimestamp": 1360761322,
            "subject": "Your monthly system status check for Test's Home"
            "html": ""
         }
      </p>
   </div>

   <div class="errors">
      <h3>Returned errors:</h3>
      <dl>
         <dt>404 NO_REPORTS_SENT</dt>
         <dd>

         </dd>
      </dl>
   </div>

</div>


    </div>
  </body>

<!-- Mirrored from api.irissmarttest.com/v5/docs/calls/users by HTTrack Website Copier/3.x [XR&CO'2013], Tue, 18 Feb 2014 21:37:15 GMT -->
</html>
